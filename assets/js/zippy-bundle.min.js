function getUpdate(q){$.ajax({url:q,dataType:"text",success:function(data,textStatus){eval(data)}})}function submitForm(formid,q){$("#"+formid).ajaxSubmit({url:q,type:"post",success:function(responseText,statusText,xhr,$form){eval(responseText)}})}function beforeZippy(e){var t=e.lastIndexOf("_");t>0&&(e=e.substring(0,t));var i="check_"+e;return"function"!=typeof window[i]||window[i]()}!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e("undefined"!=typeof jQuery?jQuery:window.Zepto)}(function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).ajaxSubmit(i))}function i(t){var i=t.target,s=e(i);if(!s.is("[type=submit],[type=image]")){var a=s.closest("[type=submit]");if(0===a.length)return;i=a[0]}var n=this;if(n.clk=i,"image"==i.type)if(void 0!==t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=s.offset();n.clk_x=t.pageX-o.left,n.clk_y=t.pageY-o.top}else n.clk_x=t.pageX-i.offsetLeft,n.clk_y=t.pageY-i.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function s(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var a={};a.fileapi=void 0!==e("<input type='file'/>").get(0).files,a.formdata=void 0!==window.FormData;var n=!!e.fn.prop;e.fn.attr2=function(){if(!n)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t){function i(i){var s,a,n=e.param(i,t.traditional).split("&"),o=n.length,r=[];for(s=0;s<o;s++)n[s]=n[s].replace(/\+/g," "),a=n[s].split("="),r.push([decodeURIComponent(a[0]),decodeURIComponent(a[1])]);return r}function o(s){for(var a=new FormData,n=0;n<s.length;n++)a.append(s[n].name,s[n].value);if(t.extraData){var o=i(t.extraData);for(n=0;n<o.length;n++)o[n]&&a.append(o[n][0],o[n][1])}t.data=null;var r=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});t.uploadProgress&&(r.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){var i=0,s=e.loaded||e.position,a=e.total;e.lengthComputable&&(i=Math.ceil(s/a*100)),t.uploadProgress(e,s,a,i)},!1),i}),r.data=null;var l=r.beforeSend;return r.beforeSend=function(e,i){t.formData?i.data=t.formData:i.data=a,l&&l.call(this,e,i)},e.ajax(r)}function r(i){function a(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){s("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){s("cannot get iframe.contentDocument: "+i),t=e.document}return t}function o(){function t(){try{var e=a(v).readyState;s("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(e){s("Server abort: ",e," (",e.name,")"),r(S),k&&clearTimeout(k),k=void 0}}var i=c.attr2("target"),n=c.attr2("action"),o="multipart/form-data",l=c.attr("enctype")||c.attr("encoding")||o;T.setAttribute("target",f),h&&!/post/i.test(h)||T.setAttribute("method","POST"),n!=u.url&&T.setAttribute("action",u.url),u.skipEncodingOverride||h&&!/post/i.test(h)||c.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),u.timeout&&(k=setTimeout(function(){D=!0,r(C)},u.timeout));var d=[];try{if(u.extraData)for(var p in u.extraData)u.extraData.hasOwnProperty(p)&&(e.isPlainObject(u.extraData[p])&&u.extraData[p].hasOwnProperty("name")&&u.extraData[p].hasOwnProperty("value")?d.push(e('<input type="hidden" name="'+u.extraData[p].name+'">').val(u.extraData[p].value).appendTo(T)[0]):d.push(e('<input type="hidden" name="'+p+'">').val(u.extraData[p]).appendTo(T)[0]));u.iframeTarget||m.appendTo("body"),v.attachEvent?v.attachEvent("onload",r):v.addEventListener("load",r,!1),setTimeout(t,15);try{T.submit()}catch(e){var g=document.createElement("form").submit;g.apply(T)}}finally{T.setAttribute("action",n),T.setAttribute("enctype",l),i?T.setAttribute("target",i):c.removeAttr("target"),e(d).remove()}}function r(t){if(!y.aborted&&!N){if(A=a(v),A||(s("cannot access response document"),t=S),t===C&&y)return y.abort("timeout"),void x.reject(y,"timeout");if(t==S&&y)return y.abort("server abort"),void x.reject(y,"error","server abort");if(A&&A.location.href!=u.iframeSrc||D){v.detachEvent?v.detachEvent("onload",r):v.removeEventListener("load",r,!1);var i,n="success";try{if(D)throw"timeout";var o="xml"==u.dataType||A.XMLDocument||e.isXMLDoc(A);if(s("isXml="+o),!o&&window.opera&&(null===A.body||!A.body.innerHTML)&&--O)return s("requeing onLoad callback, DOM not available"),void setTimeout(r,250);var h=A.body?A.body:A.documentElement;y.responseText=h?h.innerHTML:null,y.responseXML=A.XMLDocument?A.XMLDocument:A,o&&(u.dataType="xml"),y.getResponseHeader=function(e){return{"content-type":u.dataType}[e.toLowerCase()]},h&&(y.status=Number(h.getAttribute("status"))||y.status,y.statusText=h.getAttribute("statusText")||y.statusText);var l=(u.dataType||"").toLowerCase(),d=/(json|script|text)/.test(l);if(d||u.textarea){var c=A.getElementsByTagName("textarea")[0];if(c)y.responseText=c.value,y.status=Number(c.getAttribute("status"))||y.status,y.statusText=c.getAttribute("statusText")||y.statusText;else if(d){var f=A.getElementsByTagName("pre")[0],g=A.getElementsByTagName("body")[0];f?y.responseText=f.textContent?f.textContent:f.innerText:g&&(y.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"==l&&!y.responseXML&&y.responseText&&(y.responseXML=I(y.responseText));try{_=$(y,l,u)}catch(e){n="parsererror",y.error=i=e||n}}catch(e){s("error caught: ",e),n="error",y.error=i=e||n}y.aborted&&(s("upload aborted"),n=null),y.status&&(n=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===n?(u.success&&u.success.call(u.context,_,"success",y),x.resolve(y.responseText,"success",y),p&&e.event.trigger("ajaxSuccess",[y,u])):n&&(void 0===i&&(i=y.statusText),u.error&&u.error.call(u.context,y,n,i),x.reject(y,"error",i),p&&e.event.trigger("ajaxError",[y,u,i])),p&&e.event.trigger("ajaxComplete",[y,u]),p&&!--e.active&&e.event.trigger("ajaxStop"),u.complete&&u.complete.call(u.context,y,n),N=!0,u.timeout&&clearTimeout(k),setTimeout(function(){u.iframeTarget?m.attr("src",u.iframeSrc):m.remove(),y.responseXML=null},100)}}}var l,d,u,p,f,m,v,y,w,b,D,k,T=c[0],x=e.Deferred();if(x.abort=function(e){y.abort(e)},i)for(d=0;d<g.length;d++)l=e(g[d]),n?l.prop("disabled",!1):l.removeAttr("disabled");if(u=e.extend(!0,{},e.ajaxSettings,t),u.context=u.context||u,f="jqFormIO"+(new Date).getTime(),u.iframeTarget?(m=e(u.iframeTarget),b=m.attr2("name"),b?f=b:m.attr2("name",f)):(m=e('<iframe name="'+f+'" src="'+u.iframeSrc+'" />'),m.css({position:"absolute",top:"-1000px",left:"-1000px"})),v=m[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";s("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",u.iframeSrc),y.error=i,u.error&&u.error.call(u.context,y,i,t),p&&e.event.trigger("ajaxError",[y,u,i]),u.complete&&u.complete.call(u.context,y,i)}},p=u.global,p&&0==e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[y,u]),u.beforeSend&&!1===u.beforeSend.call(u.context,y,u))return u.global&&e.active--,x.reject(),x;if(y.aborted)return x.reject(),x;(w=T.clk)&&(b=w.name)&&!w.disabled&&(u.extraData=u.extraData||{},u.extraData[b]=w.value,"image"==w.type&&(u.extraData[b+".x"]=T.clk_x,u.extraData[b+".y"]=T.clk_y));var C=1,S=2,M=e("meta[name=csrf-token]").attr("content"),U=e("meta[name=csrf-param]").attr("content");U&&M&&(u.extraData=u.extraData||{},u.extraData[U]=M),u.forceSync?o():setTimeout(o,10);var _,A,N,O=50,I=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},F=e.parseJSON||function(e){return window.eval("("+e+")")},$=function(t,i,s){var a=t.getResponseHeader("content-type")||"",n="xml"===i||!i&&a.indexOf("xml")>=0,o=n?t.responseXML:t.responseText;return n&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),s&&s.dataFilter&&(o=s.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&a.indexOf("json")>=0?o=F(o):("script"===i||!i&&a.indexOf("javascript")>=0)&&e.globalEval(o)),o};return x}if(!this.length)return s("ajaxSubmit: skipping submit process - no element selected"),this;var h,l,d,c=this;"function"==typeof t?t={success:t}:void 0===t&&(t={}),h=t.type||this.attr2("method"),l=t.url||this.attr2("action"),d="string"==typeof l?e.trim(l):"",d=d||window.location.href||"",d&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:h||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var u={};if(this.trigger("form-pre-serialize",[this,t,u]),u.veto)return s("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return s("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var p=t.traditional;void 0===p&&(p=e.ajaxSettings.traditional);var f,g=[],m=this.formToArray(t.semantic,g);if(t.data&&(t.extraData=t.data,f=e.param(t.data,p)),t.beforeSubmit&&!1===t.beforeSubmit(m,this,t))return s("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,t,u]),u.veto)return s("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var v=e.param(m,p);f&&(v=v?v+"&"+f:f),"GET"==t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+v,t.data=null):t.data=v;var y=[];if(t.resetForm&&y.push(function(){c.resetForm()}),t.clearForm&&y.push(function(){c.clearForm(t.includeHidden)}),!t.dataType&&t.target){var w=t.success||function(){};y.push(function(i){var s=t.replaceTarget?"replaceWith":"html";e(t.target)[s](i).each(w,arguments)})}else t.success&&y.push(t.success);if(t.success=function(e,i,s){for(var a=t.context||this,n=0,o=y.length;n<o;n++)y[n].apply(a,[e,i,s||c,c])},t.error){var b=t.error;t.error=function(e,i,s){var a=t.context||this;b.apply(a,[e,i,s,c])}}if(t.complete){var D=t.complete;t.complete=function(e,i){var s=t.context||this;D.apply(s,[e,i,c])}}var k=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}),T=k.length>0,x="multipart/form-data",C=c.attr("enctype")==x||c.attr("encoding")==x,S=a.fileapi&&a.formdata;s("fileAPI :"+S);var M,U=(T||C)&&!S;!1!==t.iframe&&(t.iframe||U)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){M=r(m)}):M=r(m):M=(T||C)&&S?o(m):e.ajax(t),c.removeData("jqxhr").data("jqxhr",M);for(var _=0;_<g.length;_++)g[_]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(a){if(a=a||{},a.delegation=a.delegation&&e.isFunction(e.fn.on),!a.delegation&&0===this.length){var n={s:this.selector,c:this.context};return!e.isReady&&n.s?(s("DOM not ready, queuing ajaxForm"),e(function(){e(n.s,n.c).ajaxForm(a)}),this):(s("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return a.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,a,t).on("click.form-plugin",this.selector,a,i),this):this.ajaxFormUnbind().bind("submit.form-plugin",a,t).bind("click.form-plugin",a,i)},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i){var s=[];if(0===this.length)return s;var n,o=this[0],r=this.attr("id"),h=t?o.getElementsByTagName("*"):o.elements;if(h&&!/MSIE [678]/.test(navigator.userAgent)&&(h=e(h).get()),r&&(n=e(':input[form="'+r+'"]').get(),n.length&&(h=(h||[]).concat(n))),!h||!h.length)return s;var l,d,c,u,p,f,g;for(l=0,f=h.length;l<f;l++)if(p=h[l],(c=p.name)&&!p.disabled)if(t&&o.clk&&"image"==p.type)o.clk==p&&(s.push({name:c,value:e(p).val(),type:p.type}),s.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}));else if((u=e.fieldValue(p,!0))&&u.constructor==Array)for(i&&i.push(p),d=0,g=u.length;d<g;d++)s.push({name:c,value:u[d]});else if(a.fileapi&&"file"==p.type){i&&i.push(p);var m=p.files;if(m.length)for(d=0;d<m.length;d++)s.push({name:c,value:m[d],type:p.type});else s.push({name:c,value:"",type:p.type})}else null!==u&&void 0!==u&&(i&&i.push(p),s.push({name:c,value:u,type:p.type,required:p.required}));if(!t&&o.clk){var v=e(o.clk),y=v[0];c=y.name,c&&!y.disabled&&"image"==y.type&&(s.push({name:c,value:v.val()}),s.push({name:c+".x",value:o.clk_x},{name:c+".y",value:o.clk_y}))}return s},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var s=this.name;if(s){var a=e.fieldValue(this,t);if(a&&a.constructor==Array)for(var n=0,o=a.length;n<o;n++)i.push({name:s,value:a[n]});else null!==a&&void 0!==a&&i.push({name:this.name,value:a})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],s=0,a=this.length;s<a;s++){var n=this[s],o=e.fieldValue(n,t);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var s=t.name,a=t.type,n=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!s||t.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!t.checked||("submit"==a||"image"==a)&&t.form&&t.form.clk!=t||"select"==n&&-1==t.selectedIndex))return null;if("select"==n){var o=t.selectedIndex;if(o<0)return null;for(var r=[],h=t.options,l="select-one"==a,d=l?o+1:h.length,c=l?o:0;c<d;c++){var u=h[c];if(u.selected){var p=u.value;if(p||(p=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),l)return p;r.push(p)}}return r}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,a=this.tagName.toLowerCase();i.test(s)||"textarea"==a?this.value="":"checkbox"==s||"radio"==s?this.checked=!1:"select"==a?this.selectedIndex=-1:"file"==s?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(s)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var s=e(this).parent("select");t&&s[0]&&"select-one"==s[0].type&&s.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}),function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):this.Picker=e(jQuery)}(function(e){function t(n,o,h,u){function p(){return t._.node("div",t._.node("div",t._.node("div",t._.node("div",M.component.nodes(k.open),x.box),x.wrap),x.frame),x.holder,'tabindex="-1"')}function f(){C.data(o,M).addClass(x.input).val(C.data("value")?M.get("select",T.format):n.value),T.editable||C.on("focus."+k.id+" click."+k.id,function(e){e.preventDefault(),M.open()}).on("keydown."+k.id,b),a(n,{haspopup:!0,expanded:!1,readonly:!1,owns:n.id+"_root"})}function g(){a(M.$root[0],"hidden",!0)}function m(){M.$holder.on({keydown:b,"focus.toOpen":w,blur:function(){C.removeClass(x.target)},focusin:function(e){M.$root.removeClass(x.focused),e.stopPropagation()},"mousedown click":function(t){var i=t.target;i!=M.$holder[0]&&(t.stopPropagation(),"mousedown"!=t.type||e(i).is("input, select, textarea, button, option")||(t.preventDefault(),M.$holder[0].focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var t=e(this),i=t.data(),s=t.hasClass(x.navDisabled)||t.hasClass(x.disabled),a=r();a=a&&(a.type||a.href),(s||a&&!e.contains(M.$root[0],a))&&M.$holder[0].focus(),!s&&i.nav?M.set("highlight",M.component.item.highlight,{nav:i.nav}):!s&&"pick"in i?(M.set("select",i.pick),T.closeOnSelect&&M.close(!0)):i.clear?(M.clear(),T.closeOnClear&&M.close(!0)):i.close&&M.close(!0)})}function v(){var t;!0===T.hiddenName?(t=n.name,n.name=""):(t=["string"==typeof T.hiddenPrefix?T.hiddenPrefix:"","string"==typeof T.hiddenSuffix?T.hiddenSuffix:"_submit"],t=t[0]+n.name+t[1]),M._hidden=e('<input type=hidden name="'+t+'"'+(C.data("value")||n.value?' value="'+M.get("select",T.formatSubmit)+'"':"")+">")[0],C.on("change."+k.id,function(){M._hidden.value=n.value?M.get("select",T.formatSubmit):""})}function y(){D&&c?M.$holder.find("."+x.frame).one("transitionend",function(){M.$holder[0].focus()}):M.$holder[0].focus()}function w(e){e.stopPropagation(),C.addClass(x.target),M.$root.addClass(x.focused),M.open()}function b(e){var t=e.keyCode,i=/^(8|46)$/.test(t);if(27==t)return M.close(!0),!1;(32==t||i||!k.open&&M.component.key[t])&&(e.preventDefault(),e.stopPropagation(),i?M.clear().close():M.open())}if(!n)return t;var D=!1,k={id:n.id||"P"+Math.abs(~~(Math.random()*new Date))},T=h?e.extend(!0,{},h.defaults,u):u||{},x=e.extend({},t.klasses(),T.klass),C=e(n),S=function(){return this.start()},M=S.prototype={constructor:S,$node:C,start:function(){return k&&k.start?M:(k.methods={},k.start=!0,k.open=!1,k.type=n.type,n.autofocus=n==r(),n.readOnly=!T.editable,n.id=n.id||k.id,"text"!=n.type&&(n.type="text"),M.component=new h(M,T),M.$root=e('<div class="'+x.picker+'" id="'+n.id+'_root" />'),g(),M.$holder=e(p()).appendTo(M.$root),m(),T.formatSubmit&&v(),f(),T.containerHidden?e(T.containerHidden).append(M._hidden):C.after(M._hidden),T.container?e(T.container).append(M.$root):C.after(M.$root),M.on({start:M.component.onStart,render:M.component.onRender,stop:M.component.onStop,open:M.component.onOpen,close:M.component.onClose,set:M.component.onSet}).on({start:T.onStart,render:T.onRender,stop:T.onStop,open:T.onOpen,close:T.onClose,set:T.onSet}),D=i(M.$holder[0]),n.autofocus&&M.open(),M.trigger("start").trigger("render"))},render:function(t){return t?(M.$holder=e(p()),m(),M.$root.html(M.$holder)):M.$root.find("."+x.box).html(M.component.nodes(k.open)),M.trigger("render")},stop:function(){return k.start?(M.close(),M._hidden&&M._hidden.parentNode.removeChild(M._hidden),M.$root.remove(),C.removeClass(x.input).removeData(o),setTimeout(function(){C.off("."+k.id)},0),n.type=k.type,n.readOnly=!1,M.trigger("stop"),k.methods={},k.start=!1,M):M},open:function(i){return k.open?M:(C.addClass(x.active),a(n,"expanded",!0),setTimeout(function(){M.$root.addClass(x.opened),a(M.$root[0],"hidden",!1)},0),!1!==i&&(k.open=!0,D&&d.css("overflow","hidden").css("padding-right","+="+s()),y(),l.on("click."+k.id+" focusin."+k.id,function(e){var t=e.target;t!=n&&t!=document&&3!=e.which&&M.close(t===M.$holder[0])}).on("keydown."+k.id,function(i){var s=i.keyCode,a=M.component.key[s],n=i.target;27==s?M.close(!0):n!=M.$holder[0]||!a&&13!=s?e.contains(M.$root[0],n)&&13==s&&(i.preventDefault(),n.click()):(i.preventDefault(),a?t._.trigger(M.component.key.go,M,[t._.trigger(a)]):M.$root.find("."+x.highlighted).hasClass(x.disabled)||(M.set("select",M.component.item.highlight),T.closeOnSelect&&M.close(!0)))})),M.trigger("open"))},close:function(e){return e&&(T.editable?n.focus():(M.$holder.off("focus.toOpen").focus(),setTimeout(function(){M.$holder.on("focus.toOpen",w)},0))),C.removeClass(x.active),a(n,"expanded",!1),setTimeout(function(){M.$root.removeClass(x.opened+" "+x.focused),a(M.$root[0],"hidden",!0)},0),k.open?(k.open=!1,D&&d.css("overflow","").css("padding-right","-="+s()),l.off("."+k.id),M.trigger("close")):M},clear:function(e){return M.set("clear",null,e)},set:function(t,i,s){var a,n,o=e.isPlainObject(t),r=o?t:{};if(s=o&&e.isPlainObject(i)?i:s||{},t){o||(r[t]=i);for(a in r)n=r[a],a in M.component.item&&(void 0===n&&(n=null),M.component.set(a,n,s)),"select"!=a&&"clear"!=a||C.val("clear"==a?"":M.get(a,T.format)).trigger("change");M.render()}return s.muted?M:M.trigger("set",r)},get:function(e,i){if(e=e||"value",null!=k[e])return k[e];if("valueSubmit"==e){if(M._hidden)return M._hidden.value;e="value"}if("value"==e)return n.value;if(e in M.component.item){if("string"==typeof i){var s=M.component.get(e);return s?t._.trigger(M.component.formats.toString,M.component,[i,s]):""}return M.component.get(e)}},on:function(t,i,s){var a,n,o=e.isPlainObject(t),r=o?t:{};if(t){o||(r[t]=i);for(a in r)n=r[a],s&&(a="_"+a),k.methods[a]=k.methods[a]||[],k.methods[a].push(n)}return M},off:function(){var e,t,i=arguments;for(e=0,namesCount=i.length;e<namesCount;e+=1)(t=i[e])in k.methods&&delete k.methods[t];return M},trigger:function(e,i){var s=function(e){var s=k.methods[e];s&&s.map(function(e){t._.trigger(e,M,[i])})};return s("_"+e),s(e),M}};return new S}function i(e){var t,i="position";return e.currentStyle?t=e.currentStyle[i]:window.getComputedStyle&&(t=getComputedStyle(e)[i]),"fixed"==t}function s(){if(d.height()<=h.height())return 0;var t=e('<div style="visibility:hidden;width:100px" />').appendTo("body"),i=t[0].offsetWidth;t.css("overflow","scroll");var s=e('<div style="width:100%" />').appendTo(t),a=s[0].offsetWidth;return t.remove(),i-a}function a(t,i,s){if(e.isPlainObject(i))for(var a in i)n(t,a,i[a]);else n(t,i,s)}function n(e,t,i){e.setAttribute(("role"==t?"":"aria-")+t,i)}function o(t,i){e.isPlainObject(t)||(t={attribute:i}),i="";for(var s in t){var a=("role"==s?"":"aria-")+s;i+=null==t[s]?"":a+'="'+t[s]+'"'}return i}function r(){try{return document.activeElement}catch(e){}}var h=e(window),l=e(document),d=e(document.documentElement),c=null!=document.documentElement.style.transition;return t.klasses=function(e){return e=e||"picker",{picker:e,opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},t._={group:function(e){for(var i,s="",a=t._.trigger(e.min,e);a<=t._.trigger(e.max,e,[a]);a+=e.i)i=t._.trigger(e.item,e,[a]),s+=t._.node(e.node,i[0],i[1],i[2]);return s},node:function(t,i,s,a){return i?(i=e.isArray(i)?i.join(""):i,s=s?' class="'+s+'"':"",a=a?" "+a:"","<"+t+s+a+">"+i+"</"+t+">"):""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return{}.toString.call(e).indexOf("Date")>-1&&this.isInteger(e.getDate())},isInteger:function(e){return{}.toString.call(e).indexOf("Number")>-1&&e%1==0},ariaAttr:o},t.extend=function(i,s){e.fn[i]=function(a,n){var o=this.data(i);return"picker"==a?o:o&&"string"==typeof a?t._.trigger(o[a],o,[n]):this.each(function(){e(this).data(i)||new t(this,i,s,a)})},e.fn[i].defaults=s.defaults},t}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,s=e.$node[0],a=s.value,n=e.$node.data("value"),o=n||a,r=n?t.formatSubmit:t.format,h=function(){return s.currentStyle?"rtl"==s.currentStyle.direction:"rtl"==getComputedStyle(e.$root[0]).direction};i.settings=t,i.$node=e.$node,i.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse navigate create validate",view:"parse create validate viewset",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return!0===e[0]?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),o?i.set("select",o,{format:r,defaultValue:!0}):i.set("select",null).set("highlight",i.item.now),i.key={40:7,38:-7,39:function(){return h()?-1:1},37:function(){return h()?1:-1},go:function(e){var t=i.item.highlight,s=new Date(t.year,t.month,t.date+e);i.set("highlight",s,{interval:e}),this.render()}},e.on("render",function(){e.$root.find("."+t.klass.selectMonth).on("change",function(){var i=this.value;i&&(e.set("highlight",[e.get("view").year,i,e.get("highlight").date]),e.$root.find("."+t.klass.selectMonth).trigger("focus"))}),e.$root.find("."+t.klass.selectYear).on("change",function(){var i=this.value;i&&(e.set("highlight",[i,e.get("view").month,e.get("highlight").date]),e.$root.find("."+t.klass.selectYear).trigger("focus"))})},1).on("open",function(){var s="";i.disabled(i.get("now"))&&(s=":not(."+t.klass.buttonToday+")"),e.$root.find("button"+s+", select").attr("disabled",!1)},1).on("close",function(){e.$root.find("button, select").attr("disabled",!0)},1)}var s=7,a=e._;i.prototype.set=function(e,t,i){var s=this,a=s.item;return null===t?("clear"==e&&(e="select"),a[e]=t,s):(a["enable"==e?"disable":"flip"==e?"enable":e]=s.queue[e].split(" ").map(function(a){return t=s[a](e,t,i)}).pop(),"select"==e?s.set("highlight",a.select,i):"highlight"==e?s.set("view",a.highlight,i):e.match(/^(flip|min|max|disable|enable)$/)&&(a.select&&s.disabled(a.select)&&s.set("select",a.select,i),a.highlight&&s.disabled(a.highlight)&&s.set("highlight",a.highlight,i)),s)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,i,s){var n,o=this;return i=void 0===i?e:i,i==-1/0||i==1/0?n=i:t.isPlainObject(i)&&a.isInteger(i.pick)?i=i.obj:t.isArray(i)?(i=new Date(i[0],i[1],i[2]),i=a.isDate(i)?i:o.create().obj):i=a.isInteger(i)||a.isDate(i)?o.normalize(new Date(i),s):o.now(e,i,s),{year:n||i.getFullYear(),month:n||i.getMonth(),date:n||i.getDate(),day:n||i.getDay(),obj:n||i,pick:n||i.getTime()}},i.prototype.createRange=function(e,i){var s=this,n=function(e){return!0===e||t.isArray(e)||a.isDate(e)?s.create(e):e};return a.isInteger(e)||(e=n(e)),a.isInteger(i)||(i=n(i)),a.isInteger(e)&&t.isPlainObject(i)?e=[i.year,i.month,i.date+e]:a.isInteger(i)&&t.isPlainObject(e)&&(i=[e.year,e.month,e.date+i]),{from:n(e),to:n(i)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t,i){return t=new Date,i&&i.rel&&t.setDate(t.getDate()+i.rel),this.normalize(t,i)},i.prototype.navigate=function(e,i,s){var a,n,o,r,h=t.isArray(i),l=t.isPlainObject(i),d=this.item.view;if(h||l){for(l?(n=i.year,o=i.month,r=i.date):(n=+i[0],o=+i[1],r=+i[2]),s&&s.nav&&d&&d.month!==o&&(n=d.year,o=d.month),a=new Date(n,o+(s&&s.nav?s.nav:0),1),n=a.getFullYear(),o=a.getMonth();new Date(n,o,r).getMonth()!==o;)r-=1;i=[n,o,r]}return i},i.prototype.normalize=function(e){return e.setHours(0,0,0,0),e},i.prototype.measure=function(e,t){var i=this;return t?"string"==typeof t?t=i.parse(e,t):a.isInteger(t)&&(t=i.now(e,t,{rel:t})):t="min"==e?-1/0:1/0,t},i.prototype.viewset=function(e,t){return this.create([t.year,t.month,1])},i.prototype.validate=function(e,i,s){var n,o,r,h,l=this,d=i,c=s&&s.interval?s.interval:1,u=-1===l.item.enable,p=l.item.min,f=l.item.max,g=u&&l.item.disable.filter(function(e){if(t.isArray(e)){var s=l.create(e).pick;s<i.pick?n=!0:s>i.pick&&(o=!0)}return a.isInteger(e)}).length;if((!s||!s.nav&&!s.defaultValue)&&(!u&&l.disabled(i)||u&&l.disabled(i)&&(g||n||o)||!u&&(i.pick<=p.pick||i.pick>=f.pick)))for(u&&!g&&(!o&&c>0||!n&&c<0)&&(c*=-1);l.disabled(i)&&(Math.abs(c)>1&&(i.month<d.month||i.month>d.month)&&(i=d,c=c>0?1:-1),i.pick<=p.pick?(r=!0,c=1,i=l.create([p.year,p.month,p.date+(i.pick===p.pick?0:-1)])):i.pick>=f.pick&&(h=!0,c=-1,i=l.create([f.year,f.month,f.date+(i.pick===f.pick?0:1)])),!r||!h);)i=l.create([i.year,i.month,i.date+c]);return i},i.prototype.disabled=function(e){var i=this,s=i.item.disable.filter(function(s){return a.isInteger(s)?e.day===(i.settings.firstDay?s:s-1)%7:t.isArray(s)||a.isDate(s)?e.pick===i.create(s).pick:t.isPlainObject(s)?i.withinRange(s,e):void 0});return s=s.length&&!s.filter(function(e){return t.isArray(e)&&"inverted"==e[3]||t.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!s:s||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.parse=function(e,t,i){var s=this,n={};return t&&"string"==typeof t?(i&&i.format||(i=i||{},i.format=s.settings.format),s.formats.toArray(i.format).map(function(e){var i=s.formats[e],o=i?a.trigger(i,s,[t,n]):e.replace(/^!/,"").length;i&&(n[e]=t.substr(0,o)),t=t.substr(o)}),[n.yyyy||n.yy,+(n.mm||n.m)-1,n.dd||n.d]):t},i.prototype.formats=function(){function e(e,t,i){var s=e.match(/[^\x00-\x7F]+|\w+/)[0];return i.mm||i.m||(i.m=t.indexOf(s)+1),s.length}function t(e){return e.match(/\w+/)[0].length}return{d:function(e,t){return e?a.digits(e):t.date},dd:function(e,t){return e?2:a.lead(t.date)},ddd:function(e,i){return e?t(e):this.settings.weekdaysShort[i.day]},dddd:function(e,i){return e?t(e):this.settings.weekdaysFull[i.day]},m:function(e,t){return e?a.digits(e):t.month+1},mm:function(e,t){return e?2:a.lead(t.month+1)},mmm:function(t,i){var s=this.settings.monthsShort;return t?e(t,s,i):s[i.month]},mmmm:function(t,i){var s=this.settings.monthsFull;return t?e(t,s,i):s[i.month]},yy:function(e,t){return e?2:(""+t.year).slice(2)},yyyy:function(e,t){return e?4:t.year},toArray:function(e){return e.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return a.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}}}(),i.prototype.isDateExact=function(e,i){var s=this;return a.isInteger(e)&&a.isInteger(i)||"boolean"==typeof e&&"boolean"==typeof i?e===i:(a.isDate(e)||t.isArray(e))&&(a.isDate(i)||t.isArray(i))?s.create(e).pick===s.create(i).pick:!(!t.isPlainObject(e)||!t.isPlainObject(i))&&s.isDateExact(e.from,i.from)&&s.isDateExact(e.to,i.to)},i.prototype.isDateOverlap=function(e,i){var s=this,n=s.settings.firstDay?1:0;return a.isInteger(e)&&(a.isDate(i)||t.isArray(i))?(e=e%7+n)===s.create(i).day+1:a.isInteger(i)&&(a.isDate(e)||t.isArray(e))?(i=i%7+n)===s.create(e).day+1:!(!t.isPlainObject(e)||!t.isPlainObject(i))&&s.overlapRanges(e,i)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,i){var s=this,n=s.item.disable.slice(0);return"flip"==i?s.flipEnable():!1===i?(s.flipEnable(1),n=[]):!0===i?(s.flipEnable(-1),n=[]):i.map(function(e){for(var i,o=0;o<n.length;o+=1)if(s.isDateExact(e,n[o])){i=!0;break}i||(a.isInteger(e)||a.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&n.push(e)}),n},i.prototype.activate=function(e,i){var s=this,n=s.item.disable,o=n.length;return"flip"==i?s.flipEnable():!0===i?(s.flipEnable(1),n=[]):!1===i?(s.flipEnable(-1),n=[]):i.map(function(e){var i,r,h,l;for(h=0;h<o;h+=1){if(r=n[h],s.isDateExact(r,e)){i=n[h]=null,l=!0;break}if(s.isDateOverlap(r,e)){t.isPlainObject(e)?(e.inverted=!0,i=e):t.isArray(e)?(i=e,i[3]||i.push("inverted")):a.isDate(e)&&(i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(i)for(h=0;h<o;h+=1)if(s.isDateExact(n[h],e)){n[h]=null;break}if(l)for(h=0;h<o;h+=1)if(s.isDateOverlap(n[h],e)){n[h]=null;break}i&&n.push(i)}),n.filter(function(e){return null!=e})},i.prototype.nodes=function(e){var t=this,i=t.settings,n=t.item,o=n.now,r=n.select,h=n.highlight,l=n.view,d=n.disable,c=n.min,u=n.max,p=function(e,t){return i.firstDay&&(e.push(e.shift()),t.push(t.shift())),a.node("thead",a.node("tr",a.group({min:0,max:s-1,i:1,node:"th",item:function(s){return[e[s],i.klass.weekdays,'scope=col title="'+t[s]+'"']}})))}((i.showWeekdaysFull?i.weekdaysFull:i.weekdaysShort).slice(0),i.weekdaysFull.slice(0)),f=function(e){return a.node("div"," ",i.klass["nav"+(e?"Next":"Prev")]+(e&&l.year>=u.year&&l.month>=u.month||!e&&l.year<=c.year&&l.month<=c.month?" "+i.klass.navDisabled:""),"data-nav="+(e||-1)+" "+a.ariaAttr({role:"button",controls:t.$node[0].id+"_table"})+' title="'+(e?i.labelMonthNext:i.labelMonthPrev)+'"')},g=function(){var s=i.showMonthsShort?i.monthsShort:i.monthsFull;return i.selectMonths?a.node("select",a.group({min:0,max:11,i:1,node:"option",item:function(e){return[s[e],0,"value="+e+(l.month==e?" selected":"")+(l.year==c.year&&e<c.month||l.year==u.year&&e>u.month?" disabled":"")]}}),i.klass.selectMonth,(e?"":"disabled")+" "+a.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+i.labelMonthSelect+'"'):a.node("div",s[l.month],i.klass.month)},m=function(){var s=l.year,n=!0===i.selectYears?5:~~(i.selectYears/2);if(n){var o=c.year,r=u.year,h=s-n,d=s+n;if(o>h&&(d+=o-h,h=o),r<d){var p=h-o,f=d-r;h-=p>f?f:p,d=r}return a.node("select",a.group({min:h,max:d,i:1,node:"option",item:function(e){return[e,0,"value="+e+(s==e?" selected":"")]}}),i.klass.selectYear,(e?"":"disabled")+" "+a.ariaAttr({controls:t.$node[0].id+"_table"})+' title="'+i.labelYearSelect+'"')}return a.node("div",s,i.klass.year)};return a.node("div",(i.selectYears?m()+g():g()+m())+f()+f(1),i.klass.header)+a.node("table",p+a.node("tbody",a.group({min:0,max:5,i:1,node:"tr",item:function(e){var n=i.firstDay&&0===t.create([l.year,l.month,1]).day?-7:0;return[a.group({min:s*e-l.day+n+1,max:function(){return this.min+s-1},i:1,node:"td",item:function(e){e=t.create([l.year,l.month,e+(i.firstDay?1:0)]);var s=r&&r.pick==e.pick,n=h&&h.pick==e.pick,p=d&&t.disabled(e)||e.pick<c.pick||e.pick>u.pick,f=a.trigger(t.formats.toString,t,[i.format,e]);return[a.node("div",e.date,function(t){return t.push(l.month==e.month?i.klass.infocus:i.klass.outfocus),o.pick==e.pick&&t.push(i.klass.now),s&&t.push(i.klass.selected),n&&t.push(i.klass.highlighted),p&&t.push(i.klass.disabled),t.join(" ")}([i.klass.day]),"data-pick="+e.pick+" "+a.ariaAttr({role:"gridcell",label:f,selected:!(!s||t.$node.val()!==f)||null,activedescendant:!!n||null,disabled:!!p||null})),"",a.ariaAttr({role:"presentation"})]}})]}})),i.klass.table,'id="'+t.$node[0].id+'_table" '+a.ariaAttr({role:"grid",controls:t.$node[0].id,readonly:!0}))+a.node("div",a.node("button",i.today,i.klass.buttonToday,"type=button data-pick="+o.pick+(e&&!t.disabled(o)?"":" disabled")+" "+a.ariaAttr({controls:t.$node[0].id}))+a.node("button",i.clear,i.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+a.ariaAttr({controls:t.$node[0].id}))+a.node("button",i.close,i.klass.buttonClose,"type=button data-close=true "+(e?"":" disabled")+" "+a.ariaAttr({controls:t.$node[0].id})),i.klass.footer)},i.defaults=function(e){return{labelMonthNext:"Next month",labelMonthPrev:"Previous month",labelMonthSelect:"Select a month",labelYearSelect:"Select a year",monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",close:"Close",closeOnSelect:!0,closeOnClear:!0,format:"d mmmm, yyyy",klass:{table:e+"table",header:e+"header",navPrev:e+"nav--prev",navNext:e+"nav--next",navDisabled:e+"nav--disabled",month:e+"month",year:e+"year",selectMonth:e+"select--month",selectYear:e+"select--year",weekdays:e+"weekday",day:e+"day",disabled:e+"day--disabled",selected:e+"day--selected",highlighted:e+"day--highlighted",now:e+"day--today",infocus:e+"day--infocus",outfocus:e+"day--outfocus",footer:e+"footer",buttonClear:e+"button--clear",buttonToday:e+"button--today",buttonClose:e+"button--close"}}}(e.klasses().picker+"__"),e.extend("pickadate",i)}),function(e){"function"==typeof define&&define.amd?define(["picker","jquery"],e):"object"==typeof exports?module.exports=e(require("./picker.js"),require("jquery")):e(Picker,jQuery)}(function(e,t){function i(e,t){var i=this,s=e.$node[0].value,a=e.$node.data("value"),n=a||s,o=a?t.formatSubmit:t.format;i.settings=t,i.$node=e.$node,i.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"parse create validate",view:"parse create validate",disable:"deactivate",enable:"activate"},i.item={},i.item.clear=null,i.item.interval=t.interval||30,i.item.disable=(t.disable||[]).slice(0),i.item.enable=-function(e){return!0===e[0]?e.shift():-1}(i.item.disable),i.set("min",t.min).set("max",t.max).set("now"),n?i.set("select",n,{format:o}):i.set("select",null).set("highlight",i.item.now),i.key={40:1,38:-1,39:1,37:-1,go:function(e){i.set("highlight",i.item.highlight.pick+e*i.item.interval,{interval:e*i.item.interval}),this.render()}},e.on("render",function(){var i=e.$root.children(),s=i.find("."+t.klass.viewset),a=function(e){return["webkit","moz","ms","o",""].map(function(t){return(t?"-"+t+"-":"")+e})},n=function(e,t){a("transform").map(function(i){e.css(i,t)}),a("transition").map(function(i){e.css(i,t)})};s.length&&(n(i,"none"),i[0].scrollTop=~~s.position().top-2*s[0].clientHeight,n(i,""))},1).on("open",function(){e.$root.find("button").attr("disabled",!1)},1).on("close",function(){e.$root.find("button").attr("disabled",!0)},1)}var s=24,a=60,n=12,o=s*a,r=e._;i.prototype.set=function(e,t,i){var s=this,a=s.item;return null===t?("clear"==e&&(e="select"),a[e]=t,s):(a["enable"==e?"disable":"flip"==e?"enable":e]=s.queue[e].split(" ").map(function(a){return t=s[a](e,t,i)}).pop(),"select"==e?s.set("highlight",a.select,i):"highlight"==e?s.set("view",a.highlight,i):"interval"==e?s.set("min",a.min,i).set("max",a.max,i):e.match(/^(flip|min|max|disable|enable)$/)&&(a.select&&s.disabled(a.select)&&s.set("select",t,i),a.highlight&&s.disabled(a.highlight)&&s.set("highlight",t,i),"min"==e&&s.set("max",a.max,i)),s)},i.prototype.get=function(e){return this.item[e]},i.prototype.create=function(e,i,n){var h=this;return i=void 0===i?e:i,r.isDate(i)&&(i=[i.getHours(),i.getMinutes()]),t.isPlainObject(i)&&r.isInteger(i.pick)?i=i.pick:t.isArray(i)?i=+i[0]*a+ +i[1]:r.isInteger(i)||(i=h.now(e,i,n)),"max"==e&&i<h.item.min.pick&&(i+=o),"min"!=e&&"max"!=e&&(i-h.item.min.pick)%h.item.interval!=0&&(i+=h.item.interval),i=h.normalize(e,i,n),{hour:~~(s+i/a)%s,mins:(a+i%a)%a,time:(o+i)%o,pick:i%o}},i.prototype.createRange=function(e,i){var s=this,a=function(e){return!0===e||t.isArray(e)||r.isDate(e)?s.create(e):e};return r.isInteger(e)||(e=a(e)),r.isInteger(i)||(i=a(i)),r.isInteger(e)&&t.isPlainObject(i)?e=[i.hour,i.mins+e*s.settings.interval]:r.isInteger(i)&&t.isPlainObject(e)&&(i=[e.hour,e.mins+i*s.settings.interval]),{from:a(e),to:a(i)}},i.prototype.withinRange=function(e,t){return e=this.createRange(e.from,e.to),t.pick>=e.from.pick&&t.pick<=e.to.pick},i.prototype.overlapRanges=function(e,t){var i=this;return e=i.createRange(e.from,e.to),t=i.createRange(t.from,t.to),i.withinRange(e,t.from)||i.withinRange(e,t.to)||i.withinRange(t,e.from)||i.withinRange(t,e.to)},i.prototype.now=function(e,t){var i,s=this.item.interval,n=new Date,o=n.getHours()*a+n.getMinutes(),h=r.isInteger(t);return o-=o%s,i=t<0&&s*t+o<=-s,o+="min"==e&&i?0:s,h&&(o+=s*(i&&"max"!=e?t+1:t)),o},i.prototype.normalize=function(e,t){var i=this.item.interval,s=this.item.min&&this.item.min.pick||0;return t-="min"==e?0:(t-s)%i},i.prototype.measure=function(e,i,n){var o=this;return i||(i="min"==e?[0,0]:[s-1,a-1]),"string"==typeof i?i=o.parse(e,i):!0===i||r.isInteger(i)?i=o.now(e,i,n):t.isPlainObject(i)&&r.isInteger(i.pick)&&(i=o.normalize(e,i.pick,n)),i},i.prototype.validate=function(e,t,i){var s=this,a=i&&i.interval?i.interval:s.item.interval;return s.disabled(t)&&(t=s.shift(t,a)),t=s.scope(t),s.disabled(t)&&(t=s.shift(t,-1*a)),t},i.prototype.disabled=function(e){var i=this,s=i.item.disable.filter(function(s){return r.isInteger(s)?e.hour==s:t.isArray(s)||r.isDate(s)?e.pick==i.create(s).pick:t.isPlainObject(s)?i.withinRange(s,e):void 0});return s=s.length&&!s.filter(function(e){return t.isArray(e)&&"inverted"==e[2]||t.isPlainObject(e)&&e.inverted}).length,-1===i.item.enable?!s:s||e.pick<i.item.min.pick||e.pick>i.item.max.pick},i.prototype.shift=function(e,t){var i=this,s=i.item.min.pick,a=i.item.max.pick;for(t=t||i.item.interval;i.disabled(e)&&(e=i.create(e.pick+=t),!(e.pick<=s||e.pick>=a)););return e},i.prototype.scope=function(e){var t=this.item.min.pick,i=this.item.max.pick;return this.create(e.pick>i?i:e.pick<t?t:e)},i.prototype.parse=function(e,t,i){var s,n,o,h,l,d=this,c={};if(!t||"string"!=typeof t)return t;i&&i.format||(i=i||{},i.format=d.settings.format),d.formats.toArray(i.format).map(function(e){var i,s=d.formats[e],a=s?r.trigger(s,d,[t,c]):e.replace(/^!/,"").length;s&&(i=t.substr(0,a),c[e]=i.match(/^\d+$/)?+i:i),t=t.substr(a)});for(h in c)l=c[h],r.isInteger(l)?h.match(/^(h|hh)$/i)?(s=l,"h"!=h&&"hh"!=h||(s%=12)):"i"==h&&(n=l):h.match(/^a$/i)&&l.match(/^p/i)&&("h"in c||"hh"in c)&&(o=!0);return(o?s+12:s)*a+n},i.prototype.formats={h:function(e,t){return e?r.digits(e):t.hour%n||n},hh:function(e,t){return e?2:r.lead(t.hour%n||n)},H:function(e,t){return e?r.digits(e):""+t.hour%24},HH:function(e,t){return e?r.digits(e):r.lead(t.hour%24)},i:function(e,t){return e?2:r.lead(t.mins)},a:function(e,t){return e?4:o/2>t.time%o?"a.m.":"p.m."},A:function(e,t){return e?2:o/2>t.time%o?"AM":"PM"},toArray:function(e){return e.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(e,t){var i=this;return i.formats.toArray(e).map(function(e){return r.trigger(i.formats[e],i,[0,t])||e.replace(/^!/,"")}).join("")}},i.prototype.isTimeExact=function(e,i){var s=this;return r.isInteger(e)&&r.isInteger(i)||"boolean"==typeof e&&"boolean"==typeof i?e===i:(r.isDate(e)||t.isArray(e))&&(r.isDate(i)||t.isArray(i))?s.create(e).pick===s.create(i).pick:!(!t.isPlainObject(e)||!t.isPlainObject(i))&&(s.isTimeExact(e.from,i.from)&&s.isTimeExact(e.to,i.to))},i.prototype.isTimeOverlap=function(e,i){var s=this;return r.isInteger(e)&&(r.isDate(i)||t.isArray(i))?e===s.create(i).hour:r.isInteger(i)&&(r.isDate(e)||t.isArray(e))?i===s.create(e).hour:!(!t.isPlainObject(e)||!t.isPlainObject(i))&&s.overlapRanges(e,i)},i.prototype.flipEnable=function(e){var t=this.item;t.enable=e||(-1==t.enable?1:-1)},i.prototype.deactivate=function(e,i){var s=this,a=s.item.disable.slice(0);return"flip"==i?s.flipEnable():!1===i?(s.flipEnable(1),a=[]):!0===i?(s.flipEnable(-1),a=[]):i.map(function(e){for(var i,n=0;n<a.length;n+=1)if(s.isTimeExact(e,a[n])){i=!0;break}i||(r.isInteger(e)||r.isDate(e)||t.isArray(e)||t.isPlainObject(e)&&e.from&&e.to)&&a.push(e)}),a},i.prototype.activate=function(e,i){var s=this,a=s.item.disable,n=a.length;return"flip"==i?s.flipEnable():!0===i?(s.flipEnable(1),a=[]):!1===i?(s.flipEnable(-1),a=[]):i.map(function(e){var i,o,h,l;for(h=0;h<n;h+=1){if(o=a[h],s.isTimeExact(o,e)){i=a[h]=null,l=!0;break}if(s.isTimeOverlap(o,e)){t.isPlainObject(e)?(e.inverted=!0,i=e):t.isArray(e)?(i=e,i[2]||i.push("inverted")):r.isDate(e)&&(i=[e.getFullYear(),e.getMonth(),e.getDate(),"inverted"]);break}}if(i)for(h=0;h<n;h+=1)if(s.isTimeExact(a[h],e)){a[h]=null;break}if(l)for(h=0;h<n;h+=1)if(s.isTimeOverlap(a[h],e)){a[h]=null;break}i&&a.push(i)}),a.filter(function(e){return null!=e})},i.prototype.i=function(e,t){return r.isInteger(t)&&t>0?t:this.item.interval},i.prototype.nodes=function(e){var t=this,i=t.settings,s=t.item.select,a=t.item.highlight,n=t.item.view,o=t.item.disable;return r.node("ul",r.group({min:t.item.min.pick,max:t.item.max.pick,i:t.item.interval,node:"li",item:function(e){e=t.create(e);var h=e.pick,l=s&&s.pick==h,d=a&&a.pick==h,c=o&&t.disabled(e),u=r.trigger(t.formats.toString,t,[i.format,e]);return[r.trigger(t.formats.toString,t,[r.trigger(i.formatLabel,t,[e])||i.format,e]),function(e){return l&&e.push(i.klass.selected),d&&e.push(i.klass.highlighted),n&&n.pick==h&&e.push(i.klass.viewset),c&&e.push(i.klass.disabled),e.join(" ")}([i.klass.listItem]),"data-pick="+e.pick+" "+r.ariaAttr({role:"option",label:u,selected:!(!l||t.$node.val()!==u)||null,activedescendant:!!d||null,disabled:!!c||null})]}})+r.node("li",r.node("button",i.clear,i.klass.buttonClear,"type=button data-clear=1"+(e?"":" disabled")+" "+r.ariaAttr({controls:t.$node[0].id})),"",r.ariaAttr({role:"presentation"})),i.klass.list,r.ariaAttr({role:"listbox",controls:t.$node[0].id}))},i.defaults=function(e){return{clear:"Clear",format:"h:i A",interval:30,closeOnSelect:!0,closeOnClear:!0,klass:{picker:e+" "+e+"--time",holder:e+"__holder",list:e+"__list",listItem:e+"__list-item",disabled:e+"__list-item--disabled",selected:e+"__list-item--selected",highlighted:e+"__list-item--highlighted",viewset:e+"__list-item--viewset",now:e+"__list-item--now",buttonClear:e+"__button--clear"}}}(e.klasses().picker),e.extend("pickatime",i)}),jQuery.extend(jQuery.fn.pickadate.defaults,{monthsFull:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],weekdaysFull:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],weekdaysShort:["вс","пн","вт","ср","чт","пт","сб"],today:"сегодня",clear:"удалить",close:"закрыть",firstDay:1,format:"d mmmm yyyy г.",formatSubmit:"yyyy/mm/dd"}),jQuery.extend(jQuery.fn.pickatime.defaults,{clear:"удалить"}),function(e,t){"use strict";"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):t(e.jQuery)}(this,function(e){"use strict";var t=function(i,s){this.$element=e(i),this.options=e.extend({},t.defaults,s),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.select=this.options.select||this.select,this.autoSelect="boolean"!=typeof this.options.autoSelect||this.options.autoSelect,this.highlighter=this.options.highlighter||this.highlighter,this.render=this.options.render||this.render,this.updater=this.options.updater||this.updater,this.displayText=this.options.displayText||this.displayText,this.source=this.options.source,this.delay=this.options.delay,this.$menu=e(this.options.menu),this.$appendTo=this.options.appendTo?e(this.options.appendTo):null,this.fitToElement="boolean"==typeof this.options.fitToElement&&this.options.fitToElement,this.shown=!1,this.listen(),this.showHintOnFocus=("boolean"==typeof this.options.showHintOnFocus||"all"===this.options.showHintOnFocus)&&this.options.showHintOnFocus,this.afterSelect=this.options.afterSelect,this.addItem=!1,this.value=this.$element.val()||this.$element.text()};t.prototype={constructor:t,select:function(){var e=this.$menu.find(".active").data("value");if(this.$element.data("active",e),this.autoSelect||e){var t=this.updater(e);t||(t=""),this.$element.val(this.displayText(t)||t).text(this.displayText(t)||t).change(),this.afterSelect(t)}return this.hide()},updater:function(e){return e},setSource:function(e){this.source=e},show:function(){var t,i=e.extend({},this.$element.position(),{height:this.$element[0].offsetHeight}),s="function"==typeof this.options.scrollHeight?this.options.scrollHeight.call():this.options.scrollHeight;if(this.shown?t=this.$menu:this.$appendTo?(t=this.$menu.appendTo(this.$appendTo),this.hasSameParent=this.$appendTo.is(this.$element.parent())):(t=this.$menu.insertAfter(this.$element),this.hasSameParent=!0),!this.hasSameParent){t.css("position","fixed");var a=this.$element.offset();i.top=a.top,i.left=a.left}var n=e(t).parent().hasClass("dropup"),o=n?"auto":i.top+i.height+s,r=e(t).hasClass("dropdown-menu-right"),h=r?"auto":i.left;return t.css({top:o,left:h}).show(),!0===this.options.fitToElement&&t.css("width",this.$element.outerWidth()+"px"),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(t){if(this.query=void 0!==t&&null!==t?t:this.$element.val()||this.$element.text()||"",this.query.length<this.options.minLength&&!this.options.showHintOnFocus)return this.shown?this.hide():this;var i=e.proxy(function(){e.isFunction(this.source)?this.source(this.query,e.proxy(this.process,this)):this.source&&this.process(this.source)},this);clearTimeout(this.lookupWorker),this.lookupWorker=setTimeout(i,this.delay)},process:function(t){var i=this;return t=e.grep(t,function(e){return i.matcher(e)}),t=this.sorter(t),t.length||this.options.addItem?(t.length>0?this.$element.data("active",t[0]):this.$element.data("active",null),this.options.addItem&&t.push(this.options.addItem),"all"==this.options.items?this.render(t).show():this.render(t.slice(0,this.options.items)).show()):this.shown?this.hide():this},matcher:function(e){return~this.displayText(e).toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(e){for(var t,i=[],s=[],a=[];t=e.shift();){var n=this.displayText(t);n.toLowerCase().indexOf(this.query.toLowerCase())?~n.indexOf(this.query)?s.push(t):a.push(t):i.push(t)}return i.concat(s,a)},highlighter:function(t){var i,s,a,n,o=e("<div></div>"),r=this.query,h=t.toLowerCase().indexOf(r.toLowerCase()),l=r.length;if(0===l)return o.text(t).html();for(;h>-1;)i=t.substr(0,h),s=t.substr(h,l),a=t.substr(h+l),n=e("<strong></strong>").text(s),o.append(document.createTextNode(i)).append(n),t=a,h=t.toLowerCase().indexOf(r.toLowerCase());return o.append(document.createTextNode(t)).html()},render:function(t){var i=this,s=this,a=!1,n=[],o=i.options.separator;return e.each(t,function(e,i){e>0&&i[o]!==t[e-1][o]&&n.push({__type:"divider"}),!i[o]||0!==e&&i[o]===t[e-1][o]||n.push({__type:"category",name:i[o]}),n.push(i)}),t=e(n).map(function(t,n){if("category"==(n.__type||!1))return e(i.options.headerHtml).text(n.name)[0];if("divider"==(n.__type||!1))return e(i.options.headerDivider)[0];var o=s.displayText(n);return t=e(i.options.item).data("value",n),t.find("a").html(i.highlighter(o,n)),o==s.$element.val()&&(t.addClass("active"),s.$element.data("active",n),a=!0),t[0]}),this.autoSelect&&!a&&(t.filter(":not(.dropdown-header)").first().addClass("active"),this.$element.data("active",t.first().data("value"))),this.$menu.html(t),this},displayText:function(e){return void 0!==e&&void 0!==e.name?e.name:e},next:function(t){var i=this.$menu.find(".active").removeClass("active"),s=i.next();s.length||(s=e(this.$menu.find("li")[0])),s.addClass("active")},prev:function(e){var t=this.$menu.find(".active").removeClass("active"),i=t.prev();i.length||(i=this.$menu.find("li").last()),i.addClass("active")},listen:function(){this.$element.on("focus",e.proxy(this.focus,this)).on("blur",e.proxy(this.blur,this)).on("keypress",e.proxy(this.keypress,this)).on("input",e.proxy(this.input,this)).on("keyup",e.proxy(this.keyup,this)),this.eventSupported("keydown")&&this.$element.on("keydown",e.proxy(this.keydown,this)),this.$menu.on("click",e.proxy(this.click,this)).on("mouseenter","li",e.proxy(this.mouseenter,this)).on("mouseleave","li",e.proxy(this.mouseleave,this)).on("mousedown",e.proxy(this.mousedown,this))},destroy:function(){this.$element.data("typeahead",null),this.$element.data("active",null),this.$element.off("focus").off("blur").off("keypress").off("input").off("keyup"),this.eventSupported("keydown")&&this.$element.off("keydown"),this.$menu.remove(),this.destroyed=!0},eventSupported:function(e){var t=e in this.$element;return t||(this.$element.setAttribute(e,"return;"),t="function"==typeof this.$element[e]),t},move:function(e){if(this.shown)switch(e.keyCode){case 9:case 13:case 27:e.preventDefault();break;case 38:if(e.shiftKey)return;e.preventDefault(),this.prev();break;case 40:if(e.shiftKey)return;e.preventDefault(),this.next()}},keydown:function(t){this.suppressKeyPressRepeat=~e.inArray(t.keyCode,[40,38,9,13,27]),this.shown||40!=t.keyCode?this.move(t):this.lookup()},keypress:function(e){this.suppressKeyPressRepeat||this.move(e)},input:function(e){var t=this.$element.val()||this.$element.text();this.value!==t&&(this.value=t,this.lookup())},keyup:function(e){if(!this.destroyed)switch(e.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 9:case 13:if(!this.shown)return;this.select();break;case 27:if(!this.shown)return;this.hide()}},focus:function(e){this.focused||(this.focused=!0,this.options.showHintOnFocus&&!0!==this.skipShowHintOnFocus&&("all"===this.options.showHintOnFocus?this.lookup(""):this.lookup())),this.skipShowHintOnFocus&&(this.skipShowHintOnFocus=!1)},blur:function(e){this.mousedover||this.mouseddown||!this.shown?this.mouseddown&&(this.skipShowHintOnFocus=!0,this.$element.focus(),this.mouseddown=!1):(this.hide(),this.focused=!1)},click:function(e){e.preventDefault(),this.skipShowHintOnFocus=!0,this.select(),this.$element.focus(),this.hide()},mouseenter:function(t){this.mousedover=!0,this.$menu.find(".active").removeClass("active"),e(t.currentTarget).addClass("active")},mouseleave:function(e){this.mousedover=!1,!this.focused&&this.shown&&this.hide()},mousedown:function(e){this.mouseddown=!0,this.$menu.one("mouseup",function(e){this.mouseddown=!1}.bind(this))}};var i=e.fn.typeahead;e.fn.typeahead=function(i){var s=arguments;return"string"==typeof i&&"getActive"==i?this.data("active"):this.each(function(){var a=e(this),n=a.data("typeahead"),o="object"==typeof i&&i;n||a.data("typeahead",n=new t(this,o)),"string"==typeof i&&n[i]&&(s.length>1?n[i].apply(n,Array.prototype.slice.call(s,1)):n[i]())})},t.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu" role="listbox"></ul>',item:'<li><a class="dropdown-item" href="#" role="option"></a></li>',minLength:1,scrollHeight:0,autoSelect:!0,afterSelect:e.noop,addItem:!1,delay:0,separator:"category",headerHtml:'<li class="dropdown-header"></li>',headerDivider:'<li class="divider" role="separator"></li>'},e.fn.typeahead.Constructor=t,e.fn.typeahead.noConflict=function(){return e.fn.typeahead=i,this},e(document).on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(t){var i=e(this);i.data("typeahead")||i.typeahead(i.data())})}),function(e){(function(){window.Tags||(window.Tags={}),jQuery(function(){return e.tags=function(t,i){var s,a,n,o,r,h,l,d=this;null==i&&(i={});for(s in i)o=i[s],this[s]=o;if(this.bootstrapVersion||(this.bootstrapVersion="3"),this.readOnly||(this.readOnly=!1),this.suggestOnClick||(this.suggestOnClick=!1),this.suggestions||(this.suggestions=[]),this.restrictTo=null!=i.restrictTo&&i.restrictTo.concat(this.suggestions),this.exclude||(this.exclude=!1),this.displayPopovers=null!=i.popovers||null!=i.popoverData,this.popoverTrigger||(this.popoverTrigger="hover"),this.tagClass||(this.tagClass="btn-primary"),this.tagSize||(this.tagSize="md"),this.promptText||(this.promptText="Enter tags..."),this.caseInsensitive||(this.caseInsensitive=!1),this.readOnlyEmptyMessage||(this.readOnlyEmptyMessage="No tags to display..."),this.maxNumTags||(this.maxNumTags=-1),this.beforeAddingTag||(this.beforeAddingTag=function(e){}),this.afterAddingTag||(this.afterAddingTag=function(e){}),this.beforeDeletingTag||(this.beforeDeletingTag=function(e){}),this.afterDeletingTag||(this.afterDeletingTag=function(e){}),this.definePopover||(this.definePopover=function(e){return'associated content for "'+e+'"'}),this.excludes||(this.excludes=function(){return!1}),this.tagRemoved||(this.tagRemoved=function(e){}),this.pressedReturn||(this.pressedReturn=function(e){}),this.pressedDelete||(this.pressedDelete=function(e){}),this.pressedDown||(this.pressedDown=function(e){}),this.pressedUp||(this.pressedUp=function(e){}),this.$element=e(t),null!=i.tagData?this.tagsArray=i.tagData:(n=e(".tag-data",this.$element).html(),this.tagsArray=null!=n?n.split(","):[]),i.popoverData)this.popoverArray=i.popoverData;else for(this.popoverArray=[],l=this.tagsArray,r=0,h=l.length;r<h;r++)a=l[r],this.popoverArray.push(null);return this.getTags=function(){return d.tagsArray},this.getTagsContent=function(){return d.popoverArray},this.getTagsWithContent=function(){var e,t,i,s;for(e=[],t=i=0,s=d.tagsArray.length-1;0<=s?i<=s:i>=s;t=0<=s?++i:--i)e.push({tag:d.tagsArray[t],content:d.popoverArray[t]});return e},this.getTag=function(e){var t;return t=d.tagsArray.indexOf(e),t>-1?d.tagsArray[t]:null},this.getTagWithContent=function(e){var t;return t=d.tagsArray.indexOf(e),{tag:d.tagsArray[t],content:d.popoverArray[t]}},this.hasTag=function(e){return d.tagsArray.indexOf(e)>-1},this.removeTagClicked=function(t){return"A"===t.currentTarget.tagName&&(d.removeTag(e("span",t.currentTarget.parentElement).html()),e(t.currentTarget.parentNode).remove()),d},this.removeLastTag=function(){return d.tagsArray.length>0&&(d.removeTag(d.tagsArray[d.tagsArray.length-1]),d.canAddByMaxNum()&&d.enableInput()),d},this.removeTag=function(e){if(d.tagsArray.indexOf(e)>-1){if(!1===d.beforeDeletingTag(e))return;d.popoverArray.splice(d.tagsArray.indexOf(e),1),d.tagsArray.splice(d.tagsArray.indexOf(e),1),d.renderTags(),d.afterDeletingTag(e),d.canAddByMaxNum()&&d.enableInput()}return d},this.canAddByRestriction=function(e){return!1===this.restrictTo||-1!==this.restrictTo.indexOf(e)},this.canAddByExclusion=function(e){return(!1===this.exclude||-1===this.exclude.indexOf(e))&&!this.excludes(e)},this.canAddByMaxNum=function(){return-1===this.maxNumTags||this.tagsArray.length<this.maxNumTags},this.addTag=function(e){var t;if(d.canAddByRestriction(e)&&!d.hasTag(e)&&e.length>0&&d.canAddByExclusion(e)&&d.canAddByMaxNum()){if(!1===d.beforeAddingTag(e))return;t=d.definePopover(e),d.popoverArray.push(t||null),d.tagsArray.push(e),d.afterAddingTag(e),d.renderTags(),d.canAddByMaxNum()||d.disableInput()}return d},this.addTagWithContent=function(e,t){if(d.canAddByRestriction(e)&&!d.hasTag(e)&&e.length>0){if(!1===d.beforeAddingTag(e))return;d.tagsArray.push(e),d.popoverArray.push(t),d.afterAddingTag(e),d.renderTags()}return d},this.renameTag=function(e,t){return d.tagsArray[d.tagsArray.indexOf(e)]=t,d.renderTags(),d},this.setPopover=function(e,t){return d.popoverArray[d.tagsArray.indexOf(e)]=t,d.renderTags(),d},this.clickHandler=function(e){return d.makeSuggestions(e,!0)},this.keyDownHandler=function(e){var t;switch(null!=e.keyCode?e.keyCode:e.which){case 13:return e.preventDefault(),d.pressedReturn(e),a=e.target.value,-1!==d.suggestedIndex&&(a=d.suggestionList[d.suggestedIndex]),d.addTag(a),e.target.value="",d.renderTags(),d.hideSuggestions();case 46:case 8:if(d.pressedDelete(e),""===e.target.value&&d.removeLastTag(),1===e.target.value.length)return d.hideSuggestions();break;case 40:if(d.pressedDown(e),""!==d.input.val()||-1!==d.suggestedIndex&&null!=d.suggestedIndex||d.makeSuggestions(e,!0),t=d.suggestionList.length,d.suggestedIndex=d.suggestedIndex<t-1?d.suggestedIndex+1:t-1,d.selectSuggested(d.suggestedIndex),d.suggestedIndex>=0)return d.scrollSuggested(d.suggestedIndex);break;case 38:if(d.pressedUp(e),d.suggestedIndex=d.suggestedIndex>0?d.suggestedIndex-1:0,d.selectSuggested(d.suggestedIndex),d.suggestedIndex>=0)return d.scrollSuggested(d.suggestedIndex);break;case 9:case 27:return d.hideSuggestions(),d.suggestedIndex=-1}},this.keyUpHandler=function(e){var t;if(40!==(t=null!=e.keyCode?e.keyCode:e.which)&&38!==t&&27!==t)return d.makeSuggestions(e,!1)},this.getSuggestions=function(t,i){var s=this;return this.suggestionList=[],this.caseInsensitive&&(t=t.toLowerCase()),e.each(this.suggestions,function(e,a){var n;if(n=s.caseInsensitive?a.substring(0,t.length).toLowerCase():a.substring(0,t.length),s.tagsArray.indexOf(a)<0&&n===t&&(t.length>0||i))return s.suggestionList.push(a)}),this.suggestionList},this.makeSuggestions=function(t,i,s){return null==s&&(s=null!=t.target.value?t.target.value:t.target.textContent),d.suggestedIndex=-1,d.$suggestionList.html(""),e.each(d.getSuggestions(s,i),function(e,t){return d.$suggestionList.append(d.template("tags_suggestion",{suggestion:t}))}),d.$(".tags-suggestion").mouseover(d.selectSuggestedMouseOver),d.$(".tags-suggestion").click(d.suggestedClicked),d.suggestionList.length>0?d.showSuggestions():d.hideSuggestions()},this.suggestedClicked=function(e){return a=e.target.textContent,-1!==d.suggestedIndex&&(a=d.suggestionList[d.suggestedIndex]),d.addTag(a),d.input.val(""),d.makeSuggestions(e,!1,""),d.input.focus(),d.hideSuggestions()},this.hideSuggestions=function(){return d.$(".tags-suggestion-list").css({display:"none"})},this.showSuggestions=function(){return d.$(".tags-suggestion-list").css({display:"block"})},this.selectSuggestedMouseOver=function(t){return e(".tags-suggestion").removeClass("tags-suggestion-highlighted"),e(t.target).addClass("tags-suggestion-highlighted"),e(t.target).mouseout(d.selectSuggestedMousedOut),d.suggestedIndex=d.$(".tags-suggestion").index(e(t.target))},this.selectSuggestedMousedOut=function(t){return e(t.target).removeClass("tags-suggestion-highlighted")},this.selectSuggested=function(t){var i;return e(".tags-suggestion").removeClass("tags-suggestion-highlighted"),i=d.$(".tags-suggestion").eq(t),i.addClass("tags-suggestion-highlighted")},this.scrollSuggested=function(e){var t,i,s,a;if(i=d.$(".tags-suggestion").eq(e),s=d.$(".tags-suggestion").eq(0),t=i.position(),a=s.position(),null!=t)return d.$(".tags-suggestion-list").scrollTop(t.top-a.top)},this.adjustInputPosition=function(){var t,i,s,a,n,o;return n=d.$(".tag").last(),o=n.position(),i=null!=o?o.left+n.outerWidth(!0):0,s=null!=o?o.top:0,a=d.$element.width()-i,e(".tags-input",d.$element).css({paddingLeft:Math.max(i,0),paddingTop:Math.max(s,0),width:a}),t=null!=o?o.top+n.outerHeight(!0):22,d.$element.css({paddingBottom:t-d.$element.height()})},this.renderTags=function(){var t;return t=d.$(".tags"),t.html(""),d.input.attr("placeholder",0===d.tagsArray.length?d.promptText:""),e.each(d.tagsArray,function(i,s){return s=e(d.formatTag(i,s)),e("a",s).click(d.removeTagClicked),e("a",s).mouseover(d.toggleCloseColor),e("a",s).mouseout(d.toggleCloseColor),d.displayPopovers&&d.initializePopoverFor(s,d.tagsArray[i],d.popoverArray[i]),t.append(s)}),d.adjustInputPosition()},this.renderReadOnly=function(){var t;return t=d.$(".tags"),t.html(0===d.tagsArray.length?d.readOnlyEmptyMessage:""),e.each(d.tagsArray,function(i,s){return s=e(d.formatTag(i,s,!0)),d.displayPopovers&&d.initializePopoverFor(s,d.tagsArray[i],d.popoverArray[i]),t.append(s)})},this.disableInput=function(){return this.$("input").prop("disabled",!0)},this.enableInput=function(){return this.$("input").prop("disabled",!1)},this.initializePopoverFor=function(t,s,a){return i={title:s,content:a,placement:"bottom"},"hoverShowClickHide"===d.popoverTrigger?(e(t).mouseover(function(){return e(t).popover("show"),e(".tag").not(t).popover("hide")}),e(document).click(function(){return e(t).popover("hide")})):i.trigger=d.popoverTrigger,e(t).popover(i)},this.toggleCloseColor=function(t){var i,s;return s=e(t.currentTarget),i=s.css("opacity"),i=i<.8?1:.6,s.css({opacity:i})},this.formatTag=function(e,t,i){var s;return null==i&&(i=!1),s=t.replace("<","&lt;").replace(">","&gt;"),d.template("tag",{tag:s,tagClass:d.tagClass,isPopover:d.displayPopovers,isReadOnly:i,tagSize:d.tagSize})},this.addDocumentListeners=function(){return e(document).mouseup(function(e){var t;if(t=d.$(".tags-suggestion-list"),0===t.has(e.target).length)return d.hideSuggestions()})},this.template=function(e,t){return Tags.Templates.Template(this.getBootstrapVersion(),e,t)},this.$=function(t){return e(t,this.$element)},this.getBootstrapVersion=function(){return Tags.bootstrapVersion||this.bootstrapVersion},this.initializeDom=function(){return this.$element.append(this.template("tags_container"))},this.init=function(){return this.$element.addClass("bootstrap-tags").addClass("bootstrap-"+this.getBootstrapVersion()),this.initializeDom(),this.readOnly?(this.renderReadOnly(),this.removeTag=function(){},this.removeTagClicked=function(){},this.removeLastTag=function(){},this.addTag=function(){},this.addTagWithContent=function(){},this.renameTag=function(){},this.setPopover=function(){}):(this.input=e(this.template("input",{tagSize:this.tagSize})),this.suggestOnClick&&this.input.click(this.clickHandler),this.input.keydown(this.keyDownHandler),this.input.keyup(this.keyUpHandler),this.$element.append(this.input),this.$suggestionList=e(this.template("suggestion_list")),this.$element.append(this.$suggestionList),this.renderTags(),this.canAddByMaxNum()||this.disableInput(),this.addDocumentListeners())},this.init(),this},e.fn.tags=function(t){var i,s;return s={},i="number"==typeof t?t:-1,this.each(function(a,n){var o;if(o=e(n),null==o.data("tags")&&o.data("tags",new e.tags(this,t)),i===a||0===a)return s=o.data("tags")}),s}})}).call(this),function(){window.Tags||(window.Tags={}),Tags.Helpers||(Tags.Helpers={}),Tags.Helpers.addPadding=function(e,t,i){return null==t&&(t=1),null==i&&(i=!0),i?0===t?e:Tags.Helpers.addPadding("&nbsp"+e+"&nbsp",t-1):e}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[2]||(e[2]={}),Tags.Templates[2].input=function(e){return null==e&&(e={}),"<input type='text' class='tags-input input-"+function(){switch(e.tagSize){case"sm":return"small";case"md":return"medium";case"lg":return"large"}}()+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[2]||(e[2]={}),Tags.Templates[2].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove icon-remove-sign icon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[3]||(e[3]={}),Tags.Templates[3].input=function(e){return null==e&&(e={}),"<input type='text' class='form-control tags-input input-"+e.tagSize+"' />"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates)[3]||(e[3]={}),Tags.Templates[3].tag=function(e){return null==e&&(e={}),"<div class='tag label "+e.tagClass+" "+e.tagSize+"' "+(e.isPopover?"rel='popover'":"")+">    <span>"+Tags.Helpers.addPadding(e.tag,2,e.isReadOnly)+"</span>    "+(e.isReadOnly?"":"<a><i class='remove fa fa-remove glyphicon-white' /></a>")+"  </div>"}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.suggestion_list=function(e){return null==e&&(e={}),'<ul class="tags-suggestion-list dropdown-menu"></ul>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_container=function(e){return null==e&&(e={}),'<div class="tags"></div>'}}.call(this),function(){var e;window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),(e=Tags.Templates).shared||(e.shared={}),Tags.Templates.shared.tags_suggestion=function(e){return null==e&&(e={}),"<li class='tags-suggestion'>"+e.suggestion+"</li>"}}.call(this),function(){window.Tags||(window.Tags={}),Tags.Templates||(Tags.Templates={}),Tags.Templates.Template=function(e,t,i){return null!=Tags.Templates[e]&&null!=Tags.Templates[e][t]?Tags.Templates[e][t](i):Tags.Templates.shared[t](i)}}.call(this)}(window.jQuery),function(e,t,i,s){"use strict";var a="treeview",n={};n.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:s,backColor:s,borderColor:s,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:s,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:s,onNodeCollapsed:s,onNodeDisabled:s,onNodeEnabled:s,onNodeExpanded:s,onNodeSelected:s,onNodeUnchecked:s,onNodeUnselected:s,onSearchComplete:s,onSearchCleared:s},n.options={silent:!1,ignoreChildren:!1},n.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var o=function(t,i){return this.$element=e(t),this.elementId=t.id,this.styleId=this.elementId+"-style",this.init(i),{options:this.options,init:e.proxy(this.init,this),remove:e.proxy(this.remove,this),getNode:e.proxy(this.getNode,this),getParent:e.proxy(this.getParent,this),getSiblings:e.proxy(this.getSiblings,this),getSelected:e.proxy(this.getSelected,this),getUnselected:e.proxy(this.getUnselected,this),getExpanded:e.proxy(this.getExpanded,this),getCollapsed:e.proxy(this.getCollapsed,this),getChecked:e.proxy(this.getChecked,this),getUnchecked:e.proxy(this.getUnchecked,this),getDisabled:e.proxy(this.getDisabled,this),getEnabled:e.proxy(this.getEnabled,this),selectNode:e.proxy(this.selectNode,this),unselectNode:e.proxy(this.unselectNode,this),toggleNodeSelected:e.proxy(this.toggleNodeSelected,this),collapseAll:e.proxy(this.collapseAll,this),collapseNode:e.proxy(this.collapseNode,this),expandAll:e.proxy(this.expandAll,this),expandNode:e.proxy(this.expandNode,this),toggleNodeExpanded:e.proxy(this.toggleNodeExpanded,this),revealNode:e.proxy(this.revealNode,this),checkAll:e.proxy(this.checkAll,this),checkNode:e.proxy(this.checkNode,this),uncheckAll:e.proxy(this.uncheckAll,this),uncheckNode:e.proxy(this.uncheckNode,this),toggleNodeChecked:e.proxy(this.toggleNodeChecked,this),disableAll:e.proxy(this.disableAll,this),disableNode:e.proxy(this.disableNode,this),enableAll:e.proxy(this.enableAll,this),enableNode:e.proxy(this.enableNode,this),toggleNodeDisabled:e.proxy(this.toggleNodeDisabled,this),search:e.proxy(this.search,this),clearSearch:e.proxy(this.clearSearch,this)}};o.prototype.init=function(t){this.tree=[],this.nodes=[],t.data&&("string"==typeof t.data&&(t.data=e.parseJSON(t.data)),this.tree=e.extend(!0,[],t.data),delete t.data),this.options=e.extend({},n.settings,t),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},o.prototype.remove=function(){this.destroy(),e.removeData(this,a),e("#"+this.styleId).remove()},o.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},o.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},o.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",e.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},o.prototype.setInitialStates=function(t,i){if(t.nodes){i+=1;var s=t,a=this;e.each(t.nodes,function(e,t){t.nodeId=a.nodes.length,t.parentId=s.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!0),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&i<a.options.levels&&t.nodes&&t.nodes.length>0?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),a.nodes.push(t),t.nodes&&a.setInitialStates(t,i)})}},o.prototype.clickHandler=function(t){this.options.enableLinks||t.preventDefault();var i=e(t.target),s=this.findNode(i);if(s&&!s.state.disabled){var a=i.attr("class")?i.attr("class").split(" "):[];-1!==a.indexOf("expand-icon")?(this.toggleExpandedState(s,n.options),this.render()):-1!==a.indexOf("check-icon")?(this.toggleCheckedState(s,n.options),this.render()):(s.selectable?this.toggleSelectedState(s,n.options):this.toggleExpandedState(s,n.options),this.render())}},o.prototype.findNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),i=this.nodes[t];return i||console.log("Error: node does not exist"),i},o.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},o.prototype.setExpandedState=function(t,i,s){i!==t.state.expanded&&(i&&t.nodes?(t.state.expanded=!0,s.silent||this.$element.trigger("nodeExpanded",e.extend(!0,{},t))):i||(t.state.expanded=!1,s.silent||this.$element.trigger("nodeCollapsed",e.extend(!0,{},t)),t.nodes&&!s.ignoreChildren&&e.each(t.nodes,e.proxy(function(e,t){this.setExpandedState(t,!1,s)},this))))},o.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},o.prototype.setSelectedState=function(t,i,s){i!==t.state.selected&&(i?(this.options.multiSelect||e.each(this.findNodes("true","g","state.selected"),e.proxy(function(e,t){this.setSelectedState(t,!1,s)},this)),t.state.selected=!0,s.silent||this.$element.trigger("nodeSelected",e.extend(!0,{},t))):(t.state.selected=!1,s.silent||this.$element.trigger("nodeUnselected",e.extend(!0,{},t))))},o.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},o.prototype.setCheckedState=function(t,i,s){i!==t.state.checked&&(i?(t.state.checked=!0,s.silent||this.$element.trigger("nodeChecked",e.extend(!0,{},t))):(t.state.checked=!1,s.silent||this.$element.trigger("nodeUnchecked",e.extend(!0,{},t))))},o.prototype.setDisabledState=function(t,i,s){i!==t.state.disabled&&(i?(t.state.disabled=!0,this.setExpandedState(t,!1,s),this.setSelectedState(t,!1,s),this.setCheckedState(t,!1,s),s.silent||this.$element.trigger("nodeDisabled",e.extend(!0,{},t))):(t.state.disabled=!1,s.silent||this.$element.trigger("nodeEnabled",e.extend(!0,{},t))))},o.prototype.render=function(){this.initialized||(this.$element.addClass(a),this.$wrapper=e(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},o.prototype.buildTree=function(t,i){if(t){i+=1;var s=this;e.each(t,function(t,a){for(var n=e(s.template.item).addClass("node-"+s.elementId).addClass(a.state.checked?"node-checked":"").addClass(a.state.disabled?"node-disabled":"").addClass(a.state.selected?"node-selected":"").addClass(a.searchResult?"search-result":"").attr("data-nodeid",a.nodeId).attr("style",s.buildStyleOverride(a)),o=0;o<i-1;o++)n.append(s.template.indent);var r=[];if(a.nodes?(r.push("expand-icon"),a.state.expanded?r.push(s.options.collapseIcon):r.push(s.options.expandIcon)):r.push(s.options.emptyIcon),n.append(e(s.template.icon).addClass(r.join(" "))),s.options.showIcon){var r=["node-icon"];r.push(a.icon||s.options.nodeIcon),a.state.selected&&(r.pop(),r.push(a.selectedIcon||s.options.selectedIcon||a.icon||s.options.nodeIcon)),n.append(e(s.template.icon).addClass(r.join(" ")))}if(s.options.showCheckbox){var r=["check-icon"];a.state.checked?r.push(s.options.checkedIcon):r.push(s.options.uncheckedIcon),n.append(e(s.template.icon).addClass(r.join(" ")))}if(s.options.enableLinks?n.append(e(s.template.link).attr("href",a.href).append(a.text)):n.append(a.text),s.options.showTags&&a.tags&&e.each(a.tags,function(t,i){n.append(e(s.template.badge).append(i))}),s.$wrapper.append(n),a.nodes&&a.state.expanded&&!a.state.disabled)return s.buildTree(a.nodes,i)})}},o.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,i=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+t+";background-color:"+i+";"},o.prototype.injectStyle=function(){this.options.injectStyle&&!i.getElementById(this.styleId)&&e('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},o.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},o.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},o.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",o.prototype.getNode=function(e){return this.nodes[e]},o.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},o.prototype.getSiblings=function(e){var t=this.identifyNode(e),i=this.getParent(t);return(i?i.nodes:this.tree).filter(function(e){return e.nodeId!==t.nodeId})},o.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},o.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},o.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},o.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},o.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},o.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},o.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},o.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},o.prototype.selectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},o.prototype.unselectNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},o.prototype.toggleNodeSelected=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},o.prototype.collapseAll=function(t){var i=this.findNodes("true","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},o.prototype.collapseNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},o.prototype.expandAll=function(t){if((t=e.extend({},n.options,t))&&t.levels)this.expandLevels(this.tree,t.levels,t);else{var i=this.findNodes("false","g","state.expanded");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render()},o.prototype.expandNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},o.prototype.expandLevels=function(t,i,s){s=e.extend({},n.options,s),e.each(t,e.proxy(function(e,t){this.setExpandedState(t,i>0,s),t.nodes&&this.expandLevels(t.nodes,i-1,s)},this))},o.prototype.revealNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){for(var i=this.getParent(e);i;)this.setExpandedState(i,!0,t),i=this.getParent(i)},this)),this.render()},o.prototype.toggleNodeExpanded=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},o.prototype.checkAll=function(t){var i=this.findNodes("false","g","state.checked");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},o.prototype.checkNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},o.prototype.uncheckAll=function(t){var i=this.findNodes("true","g","state.checked");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},o.prototype.uncheckNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},o.prototype.toggleNodeChecked=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},o.prototype.disableAll=function(t){var i=this.findNodes("false","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},o.prototype.disableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},o.prototype.enableAll=function(t){var i=this.findNodes("true","g","state.disabled");this.forEachIdentifier(i,t,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},o.prototype.enableNode=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},o.prototype.toggleNodeDisabled=function(t,i){this.forEachIdentifier(t,i,e.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},o.prototype.forEachIdentifier=function(t,i,s){i=e.extend({},n.options,i),t instanceof Array||(t=[t]),e.each(t,e.proxy(function(e,t){s(this.identifyNode(t),i)},this))},o.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},o.prototype.search=function(t,i){i=e.extend({},n.searchOptions,i),this.clearSearch({render:!1});var s=[];if(t&&t.length>0){i.exactMatch&&(t="^"+t+"$");var a="g";i.ignoreCase&&(a+="i"),s=this.findNodes(t,a),e.each(s,function(e,t){t.searchResult=!0})}return i.revealResults?this.revealNode(s):this.render(),this.$element.trigger("searchComplete",e.extend(!0,{},s)),s},o.prototype.clearSearch=function(t){t=e.extend({},{render:!0},t);var i=e.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});t.render&&this.render(),this.$element.trigger("searchCleared",e.extend(!0,{},i))},o.prototype.findNodes=function(t,i,s){i=i||"g",s=s||"text";var a=this;return e.grep(this.nodes,function(e){var n=a.getNodeValue(e,s);if("string"==typeof n)return n.match(new RegExp(t,i))})},o.prototype.getNodeValue=function(e,t){var i=t.indexOf(".");if(i>0){var a=e[t.substring(0,i)],n=t.substring(i+1,t.length);return this.getNodeValue(a,n)}return e.hasOwnProperty(t)?e[t].toString():s};var r=function(e){t.console&&t.console.error(e)};e.fn[a]=function(t,i){var s;return this.each(function(){var n=e.data(this,a);"string"==typeof t?n?e.isFunction(n[t])&&"_"!==t.charAt(0)?(i instanceof Array||(i=[i]),s=n[t].apply(n,i)):r("No such method : "+t):r("Not initialized, can not call method : "+t):"boolean"==typeof t?s=n:e.data(this,a,new o(this,e.extend(!0,{},t)))}),s||this}}(jQuery,window,document),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function i(){return new Date(Date.UTC.apply(Date,arguments))}function s(){var e=new Date;return i(e.getFullYear(),e.getMonth(),e.getDate())}function a(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function n(e){return function(){return this[e].apply(this,arguments)}}function o(e){return e&&!isNaN(e.getTime())}function r(t,i){function s(e,t){return t.toLowerCase()}var a,n=e(t).data(),o={},r=new RegExp("^"+i.toLowerCase()+"([A-Z])");i=new RegExp("^"+i.toLowerCase());for(var h in n)i.test(h)&&(a=h.replace(r,s),o[a]=n[h]);return o}function h(t){var i={};if(m[t]||(t=t.split("-")[0],m[t])){var s=m[t];return e.each(g,function(e,t){t in s&&(i[t]=s[t])}),i}}var l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),i=0,s=this.length;i<s;i++)if(0<=this[i].valueOf()-t&&this[i].valueOf()-t<864e5)return i;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new l;return e.replace(this),e}};return function(){var i=[];return i.push.apply(i,arguments),e.extend(i,t),i}}(),d=function(t,i){e.data(t,"datepicker",this),this._process_options(i),this.dates=new l,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.o.calendarWeeks&&this.picker.find(".datepicker-days .datepicker-switch, thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return Number(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.setViewMode(this.o.startView),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.isInline&&this.show()};d.prototype={constructor:d,_resolveViewName:function(t){return e.each(v.viewModes,function(i,s){if(t===i||-1!==e.inArray(t,s.names))return t=i,!1}),t},_resolveDaysOfWeek:function(t){return e.isArray(t)||(t=t.split(/[,\s]*/)),e.map(t,Number)},_check_template:function(i){try{if(i===t||""===i)return!1;if((i.match(/[<>]/g)||[]).length<=0)return!0;return e(i).length>0}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var a=this.o=e.extend({},this._o),n=a.language;m[n]||(n=n.split("-")[0],m[n]||(n=f.language)),a.language=n,a.startView=this._resolveViewName(a.startView),a.minViewMode=this._resolveViewName(a.minViewMode),a.maxViewMode=this._resolveViewName(a.maxViewMode),a.startView=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,a.startView)),!0!==a.multidate&&(a.multidate=Number(a.multidate)||!1,!1!==a.multidate&&(a.multidate=Math.max(0,a.multidate))),a.multidateSeparator=String(a.multidateSeparator),a.weekStart%=7,a.weekEnd=(a.weekStart+6)%7;var o=v.parseFormat(a.format);a.startDate!==-1/0&&(a.startDate?a.startDate instanceof Date?a.startDate=this._local_to_utc(this._zero_time(a.startDate)):a.startDate=v.parseDate(a.startDate,o,a.language,a.assumeNearbyYear):a.startDate=-1/0),a.endDate!==1/0&&(a.endDate?a.endDate instanceof Date?a.endDate=this._local_to_utc(this._zero_time(a.endDate)):a.endDate=v.parseDate(a.endDate,o,a.language,a.assumeNearbyYear):a.endDate=1/0),a.daysOfWeekDisabled=this._resolveDaysOfWeek(a.daysOfWeekDisabled||[]),a.daysOfWeekHighlighted=this._resolveDaysOfWeek(a.daysOfWeekHighlighted||[]),a.datesDisabled=a.datesDisabled||[],e.isArray(a.datesDisabled)||(a.datesDisabled=a.datesDisabled.split(",")),a.datesDisabled=e.map(a.datesDisabled,function(e){return v.parseDate(e,o,a.language,a.assumeNearbyYear)});var r=String(a.orientation).toLowerCase().split(/\s+/g),h=a.orientation.toLowerCase();if(r=e.grep(r,function(e){return/^auto|left|right|top|bottom$/.test(e)}),a.orientation={x:"auto",y:"auto"},h&&"auto"!==h)if(1===r.length)switch(r[0]){case"top":case"bottom":a.orientation.y=r[0];break;case"left":case"right":a.orientation.x=r[0]}else h=e.grep(r,function(e){return/^left|right$/.test(e)}),a.orientation.x=h[0]||"auto",h=e.grep(r,function(e){return/^top|bottom$/.test(e)}),a.orientation.y=h[0]||"auto";else;if(a.defaultViewDate){var l=a.defaultViewDate.year||(new Date).getFullYear(),d=a.defaultViewDate.month||0,c=a.defaultViewDate.day||1;a.defaultViewDate=i(l,d,c)}else a.defaultViewDate=s()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var i,s,a,n=0;n<e.length;n++)i=e[n][0],2===e[n].length?(s=t,a=e[n][1]):3===e[n].length&&(s=e[n][1],a=e[n][2]),i.on(a,s)},_unapplyEvents:function(e){for(var i,s,a,n=0;n<e.length;n++)i=e[n][0],2===e[n].length?(a=t,s=e[n][1]):3===e[n].length&&(a=e[n][1],s=e[n][2]),i.off(s,a)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.inputField.length?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[this.picker,".prev, .next",{click:e.proxy(this.navArrowsClick,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,i){var s=i||this.dates.get(-1),a=this._utc_to_local(s);this.element.trigger({type:t,date:a,viewMode:this.viewMode,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var i=this.dates.get(e);return v.formatDate(i,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.setViewMode(this.o.startView),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var i;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))i=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;i=window.clipboardData.getData("Text")}this.setDate(i),this.update(),t.preventDefault()},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&i(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return e!==t?new Date(e):null},clearDates:function(){this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.setDates.apply(this,e.map(t,this._utc_to_local)),this},setDate:n("setDates"),setUTCDate:n("setUTCDates"),remove:n("destroy"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(i){i===t&&(i=this.o.format);var s=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,i,s)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){return this._process_options({datesDisabled:e}),this.update(),this},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),i=this.picker.outerHeight(),s=10,a=e(this.o.container),n=a.width(),o="body"===this.o.container?e(document).scrollTop():a.scrollTop(),r=a.offset(),h=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&h.push(parseInt(t))});var l=Math.max.apply(Math,h)+this.o.zIndexOffset,d=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),u=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),p=d.left-r.left,f=d.top-r.top;"body"!==this.o.container&&(f+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(p-=t-u)):d.left<0?(this.picker.addClass("datepicker-orient-left"),p-=d.left-s):p+t>n?(this.picker.addClass("datepicker-orient-right"),p+=u-t):this.o.rtl?this.picker.addClass("datepicker-orient-right"):this.picker.addClass("datepicker-orient-left");var g,m=this.o.orientation.y;if("auto"===m&&(g=-o+f-i,m=g<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+m),"top"===m?f-=i+parseInt(this.picker.css("padding-top")):f+=c,this.o.rtl){var v=n-(p+u);this.picker.css({top:f,right:v,zIndex:l})}else this.picker.css({top:f,left:p,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),i=[],s=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),i.push(t)},this)),s=!0):(i=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),i=i&&this.o.multidate?i.split(this.o.multidateSeparator):[i],delete this.element.data().date),i=e.map(i,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),i=e.grep(i,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(i),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,s?(this.setValue(),this.element.change()):this.dates.length&&String(t)!==String(this.dates)&&s&&(this._trigger("changeDate"),this.element.change()),!this.dates.length&&t.length&&(this._trigger("clearDate"),this.element.change()),this.fill(),this},fillDow:function(){var t=this.o.weekStart,i="<tr>";for(this.o.calendarWeeks&&(i+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)i+='<th class="dow',-1!==e.inArray(t,this.o.daysOfWeekDisabled)&&(i+=" disabled"),i+='">'+m[this.o.language].daysMin[t++%7]+"</th>";i+="</tr>",this.picker.find(".datepicker-days thead").append(i)},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",i=0;i<12;){t+='<span class="month'+(e&&e.getMonth()===i?" focused":"")+'">'+m[this.o.language].monthsShort[i++]+"</span>"}this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var i=[],n=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=s();return t.getUTCFullYear()<n||t.getUTCFullYear()===n&&t.getUTCMonth()<o?i.push("old"):(t.getUTCFullYear()>n||t.getUTCFullYear()===n&&t.getUTCMonth()>o)&&i.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&i.push("focused"),this.o.todayHighlight&&a(t,r)&&i.push("today"),-1!==this.dates.contains(t)&&i.push("active"),this.dateWithinRange(t)||i.push("disabled"),this.dateIsDisabled(t)&&i.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&i.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&i.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&i.push("selected"),t.valueOf()===this.range[0]&&i.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&i.push("range-end")),i},_fill_yearsView:function(i,s,a,n,o,r,h,l){var d,c,u,p,f,g,m,v,y,w,b;for(d="",c=this.picker.find(i),u=parseInt(o/a,10)*a,f=parseInt(r/n,10)*n,g=parseInt(h/n,10)*n,p=e.map(this.dates,function(e){return parseInt(e.getUTCFullYear()/n,10)*n}),c.find(".datepicker-switch").text(u+"-"+(u+9*n)),m=u-n,v=-1;v<11;v+=1)y=[s],w=null,-1===v?y.push("old"):10===v&&y.push("new"),-1!==e.inArray(m,p)&&y.push("active"),(m<f||m>g)&&y.push("disabled"),m===this.viewDate.getFullYear()&&y.push("focused"),l!==e.noop&&(b=l(new Date(m,0,1)),b===t?b={}:"boolean"==typeof b?b={enabled:b}:"string"==typeof b&&(b={classes:b}),!1===b.enabled&&y.push("disabled"),b.classes&&(y=y.concat(b.classes.split(/\s+/))),b.tooltip&&(w=b.tooltip)),d+='<span class="'+y.join(" ")+'"'+(w?' title="'+w+'"':"")+">"+m+"</span>",m+=n;c.find("td").html(d)},fill:function(){var s,a,n=new Date(this.viewDate),o=n.getUTCFullYear(),r=n.getUTCMonth(),h=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,l=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,u=m[this.o.language].today||m.en.today||"",p=m[this.o.language].clear||m.en.clear||"",f=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(o)&&!isNaN(r)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(n,f,this.o.language)),this.picker.find("tfoot .today").text(u).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(p).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var g=i(o,r,0),y=g.getUTCDate();g.setUTCDate(y-(g.getUTCDay()-this.o.weekStart+7)%7);var w=new Date(g);g.getUTCFullYear()<100&&w.setUTCFullYear(g.getUTCFullYear()),w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();for(var b,D,k=[];g.valueOf()<w;){if((b=g.getUTCDay())===this.o.weekStart&&(k.push("<tr>"),this.o.calendarWeeks)){var T=new Date(+g+(this.o.weekStart-b-7)%7*864e5),x=new Date(Number(T)+(11-T.getUTCDay())%7*864e5),C=new Date(Number(C=i(x.getUTCFullYear(),0,1))+(11-C.getUTCDay())%7*864e5),S=(x-C)/864e5/7+1;k.push('<td class="cw">'+S+"</td>")}D=this.getClassNames(g),D.push("day"),this.o.beforeShowDay!==e.noop&&(a=this.o.beforeShowDay(this._utc_to_local(g)),a===t?a={}:"boolean"==typeof a?a={enabled:a}:"string"==typeof a&&(a={classes:a}),!1===a.enabled&&D.push("disabled"),a.classes&&(D=D.concat(a.classes.split(/\s+/))),a.tooltip&&(s=a.tooltip)),D=e.isFunction(e.uniqueSort)?e.uniqueSort(D):e.unique(D),k.push('<td class="'+D.join(" ")+'"'+(s?' title="'+s+'"':"")+(this.o.dateCells?' data-date="'+g.getTime().toString()+'"':"")+">"+g.getUTCDate()+"</td>"),s=null,b===this.o.weekEnd&&k.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").html(k.join(""));var M=m[this.o.language].monthsTitle||m.en.monthsTitle||"Months",U=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?M:o).end().find("tbody span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===o&&U.eq(t.getUTCMonth()).addClass("active")}),(o<h||o>d)&&U.addClass("disabled"),o===h&&U.slice(0,l).addClass("disabled"),o===d&&U.slice(c+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var _=this;e.each(U,function(i,s){var a=new Date(o,i,1),n=_.o.beforeShowMonth(a);n===t?n={}:"boolean"==typeof n?n={enabled:n}:"string"==typeof n&&(n={classes:n}),!1!==n.enabled||e(s).hasClass("disabled")||e(s).addClass("disabled"),n.classes&&e(s).addClass(n.classes),n.tooltip&&e(s).prop("title",n.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,o,h,d,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,o,h,d,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,o,h,d,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e,t,i=new Date(this.viewDate),s=i.getUTCFullYear(),a=i.getUTCMonth();switch(this.viewMode){case 0:e=this.o.startDate!==-1/0&&s<=this.o.startDate.getUTCFullYear()&&a<=this.o.startDate.getUTCMonth(),t=this.o.endDate!==1/0&&s>=this.o.endDate.getUTCFullYear()&&a>=this.o.endDate.getUTCMonth();break;case 1:case 2:case 3:case 4:e=this.o.startDate!==-1/0&&s<=this.o.startDate.getUTCFullYear(),t=this.o.endDate!==1/0&&s>=this.o.endDate.getUTCFullYear()}this.picker.find(".prev").toggleClass("disabled",e),this.picker.find(".next").toggleClass("disabled",t)}},click:function(t){t.preventDefault(),t.stopPropagation();var a,n,o,r,h;a=e(t.target),a.hasClass("datepicker-switch")&&this.viewMode!==this.o.maxViewMode&&this.setViewMode(this.viewMode+1),a.hasClass("today")&&!a.hasClass("day")&&(this.setViewMode(0),this._setDate(s(),"linked"===this.o.todayBtn?null:"view")),a.hasClass("clear")&&this.clearDates(),a.hasClass("disabled")||(a.hasClass("day")&&(o=Number(a.text()),r=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth(),(a.hasClass("old")||a.hasClass("new"))&&(n=a.hasClass("old")?-1:1,h=(h+n+12)%12,(-1===n&&11===h||1===n&&0===h)&&(r+=n,this._trigger("changeYear",this.viewDate)),this._trigger("changeMonth",this.viewDate)),this._setDate(i(r,h,o))),(a.hasClass("month")||a.hasClass("year")||a.hasClass("decade")||a.hasClass("century"))&&(this.viewDate.setUTCDate(1),o=1,1===this.viewMode?(h=a.parent().find("span").index(a),r=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(h)):(h=0,r=Number(a.text()),this.viewDate.setUTCFullYear(r)),this._trigger(v.viewModes[this.viewMode-1].e,this.viewDate),this.viewMode===this.o.minViewMode?this._setDate(i(r,h,o)):(this.setViewMode(this.viewMode-1),this.fill()))),this.picker.is(":visible")&&this._focused_from&&this._focused_from.focus(),delete this._focused_from},navArrowsClick:function(t){var i=e(t.target),s=i.hasClass("prev")?-1:1;0!==this.viewMode&&(s*=12*v.viewModes[this.viewMode].navStep),this.viewDate=this.moveMonth(this.viewDate,s),this._trigger(v.viewModes[this.viewMode].e,this.viewDate),this.fill()},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField.trigger("change"),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var i=new Date(e);return i.setUTCDate(e.getUTCDate()+t),i},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!o(e))return this.o.defaultViewDate;if(!t)return e;var i,s,a=new Date(e.valueOf()),n=a.getUTCDate(),r=a.getUTCMonth(),h=Math.abs(t);if(t=t>0?1:-1,1===h)s=-1===t?function(){return a.getUTCMonth()===r}:function(){return a.getUTCMonth()!==i},i=r+t,a.setUTCMonth(i),i=(i+12)%12;else{for(var l=0;l<h;l++)a=this.moveMonth(a,t);i=a.getUTCMonth(),a.setUTCDate(n),s=function(){return i!==a.getUTCMonth()}}for(;s();)a.setUTCDate(--n),a.setUTCMonth(i);return a},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,i){do{if(e=this[i](e,t),!this.dateWithinRange(e))return!1;i="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return a(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(!this.picker.is(":visible"))return void(40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation()));var t,i,s=!1,a=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(i=this.moveAvailableDate(a,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(i=this.moveAvailableDate(a,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?i=this.moveAvailableDate(a,t,"moveDay"):this.weekOfDateIsDisabled(a)||(i=this.moveAvailableDate(a,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),i=this.moveAvailableDate(a,t,"moveYear")),i&&(this.focusDate=this.viewDate=i,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;a=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(a),s=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}s&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField.trigger("change"))},setViewMode:function(e){this.viewMode=e,this.picker.children("div").hide().filter(".datepicker-"+v.viewModes[this.viewMode].clsName).show(),this.updateNavArrows(),this._trigger("changeViewMode",new Date(this.viewDate))}};var c=function(t,i){e.data(t,"datepicker",this),this.element=e(t),this.inputs=e.map(i.inputs,function(e){return e.jquery?e[0]:e}),delete i.inputs,this.keepEmptyValues=i.keepEmptyValues,delete i.keepEmptyValues,p.call(e(this.inputs),i).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e.data(t,"datepicker")}),this.updateDates()};c.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,i){i.setRange(t)})},dateUpdated:function(i){if(!this.updating){this.updating=!0;var s=e.data(i.target,"datepicker");if(s!==t){var a=s.getUTCDate(),n=this.keepEmptyValues,o=e.inArray(i.target,this.inputs),r=o-1,h=o+1,l=this.inputs.length;if(-1!==o){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t!==s&&n||t.setUTCDate(a)}),a<this.dates[r])for(;r>=0&&a<this.dates[r];)this.pickers[r--].setUTCDate(a);else if(a>this.dates[h])for(;h<l&&a>this.dates[h];)this.pickers[h++].setUTCDate(a);this.updateDates(),delete this.updating}}}},destroy:function(){e.map(this.pickers,function(e){e.destroy()}),e(this.inputs).off("changeDate",this.dateUpdated),delete this.element.data().datepicker},remove:n("destroy")};var u=e.fn.datepicker,p=function(i){var s=Array.apply(null,arguments);s.shift();var a;if(this.each(function(){var t=e(this),n=t.data("datepicker"),o="object"==typeof i&&i;if(!n){var l=r(this,"date"),u=e.extend({},f,l,o),p=h(u.language),g=e.extend({},f,p,l,o);t.hasClass("input-daterange")||g.inputs?(e.extend(g,{inputs:g.inputs||t.find("input").toArray()}),n=new c(this,g)):n=new d(this,g),t.data("datepicker",n)}"string"==typeof i&&"function"==typeof n[i]&&(a=n[i].apply(n,s))}),a===t||a instanceof d||a instanceof c)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+i+" function)");return a};e.fn.datepicker=p;var f=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keepEmptyValues:!1,keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,dateCells:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},g=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=d;var m=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={viewModes:[{names:["days","month"],clsName:"days",e:"changeMonth"},{names:["months","year"],clsName:"months",e:"changeYear",navStep:1},{names:["years","decade"],clsName:"years",e:"changeDecade",navStep:10},{names:["decades","century"],clsName:"decades",e:"changeCentury",navStep:100},{names:["centuries","millennium"],clsName:"centuries",e:"changeMillennium",navStep:1e3}],validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),i=e.match(this.validParts);if(!t||!t.length||!i||0===i.length)throw new Error("Invalid date format.");return{separators:t,parts:i}},parseDate:function(a,n,o,r){function h(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}function l(){var e=this.slice(0,c[f].length),t=c[f].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!a)return t;if(a instanceof Date)return a;if("string"==typeof n&&(n=v.parseFormat(n)),n.toValue)return n.toValue(a,n,o);var c,u,p,f,g,y={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},w={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(a in w&&(a=w[a]),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/i.test(a)){for(c=a.match(/([\-+]\d+)([dmwy])/gi),a=new Date,f=0;f<c.length;f++)u=c[f].match(/([\-+]\d+)([dmwy])/i),p=Number(u[1]),g=y[u[2].toLowerCase()],a=d.prototype[g](a,p);return i(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate())}c=a&&a.match(this.nonpunctuation)||[],a=new Date;var b,D,k={},T=["yyyy","yy","M","MM","m","mm","d","dd"],x={yyyy:function(e,t){return e.setUTCFullYear(r?h(t,r):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};x.yy=x.yyyy,x.M=x.MM=x.mm=x.m,x.dd=x.d,a=s();var C=n.parts.slice();if(c.length!==C.length&&(C=e(C).filter(function(t,i){return-1!==e.inArray(i,T)}).toArray()),c.length===C.length){var S;for(f=0,S=C.length;f<S;f++){if(b=parseInt(c[f],10),u=C[f],isNaN(b))switch(u){case"MM":D=e(m[o].months).filter(l),b=e.inArray(D[0],m[o].months)+1;break;case"M":D=e(m[o].monthsShort).filter(l),b=e.inArray(D[0],m[o].monthsShort)+1}k[u]=b}var M,U;for(f=0;f<T.length;f++)(U=T[f])in k&&!isNaN(k[U])&&(M=new Date(a),x[U](M,k[U]),isNaN(M)||(a=M))}return a},formatDate:function(t,i,s){if(!t)return"";if("string"==typeof i&&(i=v.parseFormat(i)),i.toDisplay)return i.toDisplay(t,i,s);var a={d:t.getUTCDate(),D:m[s].daysShort[t.getUTCDay()],DD:m[s].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:m[s].monthsShort[t.getUTCMonth()],MM:m[s].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};a.dd=(a.d<10?"0":"")+a.d,a.mm=(a.m<10?"0":"")+a.m,t=[];for(var n=e.extend([],i.separators),o=0,r=i.parts.length;o<=r;o++)n.length&&t.push(n.shift()),t.push(a[i.parts[o]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=u,this},e.fn.datepicker.version="1.7.0-dev",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var i=e(this);i.data("datepicker")||(t.preventDefault(),p.call(i,"show"))}),e(function(){p.call(e('[data-provide="datepicker-inline"]'))})}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function i(){var e,t,i,s,a,n,o,r;if(t=(new Date).toString(),(i=(null!=(o=t.split("(")[1])?o.slice(0,-1):0)||t.split(" "))instanceof Array){n=[];for(var s=0,a=i.length;s<a;s++)r=i[s],((e=null!==(o=r.match(/\b[A-Z]+\b/)))?o[0]:0)&&n.push(e);i=n.pop()}return i}function s(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,i){i===t&&(i=0),i<0&&(i+=this.length),i<0&&(i=0);for(var s=this.length;i<s;i++)if(i in this&&this[i]===e)return i;return-1});var a=function(s,a){var n=this;this.element=e(s),this.container=a.container||"body",this.language=a.language||this.element.data("date-language")||"en",this.language=this.language in o?this.language:this.language.split("-")[0],this.language=this.language in o?this.language:"en",this.isRTL=o[this.language].rtl||!1,this.formatType=a.formatType||this.element.data("format-type")||"standard",this.format=r.parseFormat(a.format||this.element.data("date-format")||o[this.language].format||r.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=a.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=a.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=!!this.element.is(".date")&&(3===this.bootcssVer?this.element.find(".input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-remove, .input-group-addon .glyphicon-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent()),this.componentReset=!!this.element.is(".date")&&(3===this.bootcssVer?this.element.find(".input-group-addon .glyphicon-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent()),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=a.linkField||this.element.data("link-field")||!1,this.linkFormat=r.parseFormat(a.linkFormat||this.element.data("link-format")||r.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=a.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=a.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=a.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=a.initialDate||new Date,this.zIndex=a.zIndex||this.element.data("z-index")||t,this.title=void 0!==a.title&&a.title,this.timezone=a.timezone||i(),this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(t){0===e(t.target).closest(".datetimepicker").length&&n.hide()},this.formatViewType="datetime","formatViewType"in a?this.formatViewType=a.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in a?this.minView=a.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=r.convertViewMode(this.minView),this.maxView=r.modes.length-1,"maxView"in a?this.maxView=a.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=r.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in a?this.wheelViewModeNavigation=a.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in a?this.wheelViewModeNavigationInverseDirection=a.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in a?this.wheelViewModeNavigationDelay=a.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in a?this.startViewMode=a.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=r.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in a?this.viewSelect=a.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=r.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in a?this.forceParse=a.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var h=3===this.bootcssVer?r.templateV3:r.template;-1!==h.indexOf("{iconType}");)h=h.replace("{iconType}",this.icontype);for(;-1!==h.indexOf("{leftArrow}");)h=h.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==h.indexOf("{rightArrow}");)h=h.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=e(h).appendTo(this.isInline?this.element:this.container).on({click:e.proxy(this.click,this),mousedown:e.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(e.fn.mousewheel?this.picker.on({mousewheel:e.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var l=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(l).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}e(document).on("mousedown touchend",this.clickedOutside),this.autoclose=!1,"autoclose"in a?this.autoclose=a.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in a?this.keyboardNavigation=a.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=a.todayBtn||this.element.data("date-today-btn")||!1,this.clearBtn=a.clearBtn||this.element.data("date-clear-btn")||!1,this.todayHighlight=a.todayHighlight||this.element.data("date-today-highlight")||!1,this.weekStart=0,void 0!==a.weekStart?this.weekStart=a.weekStart:void 0!==this.element.data("date-weekstart")?this.weekStart=this.element.data("date-weekstart"):void 0!==o[this.language].weekStart&&(this.weekStart=o[this.language].weekStart),this.weekStart=this.weekStart%7,this.weekEnd=(this.weekStart+6)%7,this.onRenderDay=function(e){var t=(a.onRenderDay||function(){return[]})(e);return"string"==typeof t&&(t=[t]),["day"].concat(t||[])},this.onRenderHour=function(e){var t=(a.onRenderHour||function(){return[]})(e),i=["hour"];return"string"==typeof t&&(t=[t]),i.concat(t||[])},this.onRenderMinute=function(e){var t=(a.onRenderMinute||function(){return[]})(e),i=["minute"];return"string"==typeof t&&(t=[t]),e<this.startDate||e>this.endDate?i.push("disabled"):Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(e.getUTCMinutes()/this.minuteStep)&&i.push("active"),i.concat(t||[])},this.onRenderYear=function(e){var t=(a.onRenderYear||function(){return[]})(e),i=["year"];"string"==typeof t&&(t=[t]),this.date.getUTCFullYear()===e.getUTCFullYear()&&i.push("active");var s=e.getUTCFullYear(),n=this.endDate.getUTCFullYear();return(e<this.startDate||s>n)&&i.push("disabled"),i.concat(t||[])},this.onRenderMonth=function(e){var t=(a.onRenderMonth||function(){return[]})(e),i=["month"];return"string"==typeof t&&(t=[t]),i.concat(t||[])},this.startDate=new Date(-8639968443048e3),this.endDate=new Date(8639968443048e3),this.datesDisabled=[],this.daysOfWeekDisabled=[],this.setStartDate(a.startDate||this.element.data("date-startdate")),this.setEndDate(a.endDate||this.element.data("date-enddate")),this.setDatesDisabled(a.datesDisabled||this.element.data("date-dates-disabled")),this.setDaysOfWeekDisabled(a.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(a.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(a.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};a.prototype={constructor:a,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(this.update,this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:e.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]];for(var t,i,s=0;s<this._events.length;s++)t=this._events[s][0],i=this._events[s][1],t.on(i)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(t){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),e(window).on("resize",e.proxy(this.place,this)),t&&(t.stopPropagation(),t.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),e(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||e(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),e(document).off("mousedown",this.clickedOutside),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return null===e?null:new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(e){this.initialDate=e},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){this.format=r.parseFormat(e,this.formatType);var t;this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var t=this.getFormattedDate();this.isInput?this.element.val(t):(this.component&&this.element.find("input").val(t),this.element.data("date",t)),this.linkField&&e("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return e=e||this.format,r.formatDate(this.date,e,this.language,this.formatType,this.timezone)},setStartDate:function(e){this.startDate=e||this.startDate,8639968443048e3!==this.startDate.valueOf()&&(this.startDate=r.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||this.endDate,8639968443048e3!==this.endDate.valueOf()&&(this.endDate=r.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setDatesDisabled:function(t){this.datesDisabled=t||[],e.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/));var i=this;this.datesDisabled=e.map(this.datesDisabled,function(e){return r.parseDate(e,i.format,i.language,i.formatType,i.timezone).toDateString()}),this.update(),this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(!1===this.title?t:this.title)},setDaysOfWeekDisabled:function(t){this.daysOfWeekDisabled=t||[],e.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=e.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(t){this.minutesDisabled=t||[],e.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=e.map(this.minutesDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(t){this.hoursDisabled=t||[],e.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=e.map(this.hoursDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var t=0;e("div").each(function(){var i=parseInt(e(this).css("zIndex"),10);i>t&&(t=i)}),this.zIndex=t+10}var i,s,a,n;n=this.container instanceof e?this.container.offset():e(this.container).offset(),this.component?(i=this.component.offset(),a=i.left,"bottom-left"!==this.pickerPosition&&"top-left"!==this.pickerPosition||(a+=this.component.outerWidth()-this.picker.outerWidth())):(i=this.element.offset(),a=i.left,"bottom-left"!==this.pickerPosition&&"top-left"!==this.pickerPosition||(a+=this.element.outerWidth()-this.picker.outerWidth()));var o=document.body.clientWidth||window.innerWidth;a+220>o&&(a=o-220),s="top-left"===this.pickerPosition||"top-right"===this.pickerPosition?i.top-this.picker.outerHeight():i.top+this.height,s-=n.top,a-=n.left,this.picker.css({top:s,left:a,zIndex:this.zIndex})}},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):"string"==typeof(e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate)&&(e=e.replace(/^\s+|\s+$/g,"")),e||(e=new Date,t=!1),"string"==typeof e&&(new RegExp(this.hour_minute).test(e)||new RegExp(this.hour_minute+":[0-5][0-9]").test(e))&&(e=this.getDate()),this.date=r.parseDate(e,this.format,this.language,this.formatType,this.timezone),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+o[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=new Date(this.viewDate),i=0;i<12;i++){t.setUTCMonth(i);e+='<span class="'+this.onRenderMonth(t).join(" ")+'">'+o[this.language].monthsShort[i]+"</span>"}this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(this.date&&this.viewDate){var t=new Date(this.viewDate),i=t.getUTCFullYear(),a=t.getUTCMonth(),h=t.getUTCDate(),l=t.getUTCHours(),d=this.startDate.getUTCFullYear(),c=this.startDate.getUTCMonth(),u=this.endDate.getUTCFullYear(),p=this.endDate.getUTCMonth()+1,f=new s(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),g=new Date;if(this.setTitle(".datetimepicker-days",o[this.language].months[a]+" "+i),"time"===this.formatViewType){var m=this.getFormattedDate();this.setTitle(".datetimepicker-hours",m),this.setTitle(".datetimepicker-minutes",m)}else this.setTitle(".datetimepicker-hours",h+" "+o[this.language].months[a]+" "+i),this.setTitle(".datetimepicker-minutes",h+" "+o[this.language].months[a]+" "+i);this.picker.find("tfoot th.today").text(o[this.language].today||o.en.today).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.clear").text(o[this.language].clear||o.en.clear).toggle(!1!==this.clearBtn),this.updateNavArrows(),this.fillMonths();var v=s(i,a-1,28,0,0,0,0),y=r.getDaysInMonth(v.getUTCFullYear(),v.getUTCMonth());v.setUTCDate(y),v.setUTCDate(y-(v.getUTCDay()-this.weekStart+7)%7);var w=new Date(v);w.setUTCDate(w.getUTCDate()+42),w=w.valueOf();for(var b,D=[];v.valueOf()<w;)v.getUTCDay()===this.weekStart&&D.push("<tr>"),b=this.onRenderDay(v),v.getUTCFullYear()<i||v.getUTCFullYear()===i&&v.getUTCMonth()<a?b.push("old"):(v.getUTCFullYear()>i||v.getUTCFullYear()===i&&v.getUTCMonth()>a)&&b.push("new"),this.todayHighlight&&v.getUTCFullYear()===g.getFullYear()&&v.getUTCMonth()===g.getMonth()&&v.getUTCDate()===g.getDate()&&b.push("today"),v.valueOf()===f&&b.push("active"),(v.valueOf()+864e5<=this.startDate||v.valueOf()>this.endDate||-1!==e.inArray(v.getUTCDay(),this.daysOfWeekDisabled)||-1!==e.inArray(v.toDateString(),this.datesDisabled))&&b.push("disabled"),D.push('<td class="'+b.join(" ")+'">'+v.getUTCDate()+"</td>"),v.getUTCDay()===this.weekEnd&&D.push("</tr>"),v.setUTCDate(v.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(D.join("")),D=[];var k="",T="",x="",C=this.hoursDisabled||[];t=new Date(this.viewDate);for(var S=0;S<24;S++){t.setUTCHours(S),b=this.onRenderHour(t),-1!==C.indexOf(S)&&b.push("disabled");var M=s(i,a,h,S);M.valueOf()+36e5<=this.startDate||M.valueOf()>this.endDate?b.push("disabled"):l===S&&b.push("active"),this.showMeridian&&2===o[this.language].meridiem.length?(T=S<12?o[this.language].meridiem[0]:o[this.language].meridiem[1],T!==x&&(""!==x&&D.push("</fieldset>"),D.push('<fieldset class="hour"><legend>'+T.toUpperCase()+"</legend>")),x=T,k=S%12?S%12:12,S<12?b.push("hour_am"):b.push("hour_pm"),D.push('<span class="'+b.join(" ")+'">'+k+"</span>"),23===S&&D.push("</fieldset>")):(k=S+":00",D.push('<span class="'+b.join(" ")+'">'+k+"</span>"))}this.picker.find(".datetimepicker-hours td").html(D.join("")),D=[],k="",T="",x="";var U=this.minutesDisabled||[];t=new Date(this.viewDate);for(var S=0;S<60;S+=this.minuteStep)-1===U.indexOf(S)&&(t.setUTCMinutes(S),t.setUTCSeconds(0),b=this.onRenderMinute(t),this.showMeridian&&2===o[this.language].meridiem.length?(T=l<12?o[this.language].meridiem[0]:o[this.language].meridiem[1],T!==x&&(""!==x&&D.push("</fieldset>"),D.push('<fieldset class="minute"><legend>'+T.toUpperCase()+"</legend>")),x=T,k=l%12?l%12:12,D.push('<span class="'+b.join(" ")+'">'+k+":"+(S<10?"0"+S:S)+"</span>"),59===S&&D.push("</fieldset>")):(k=S+":00",D.push('<span class="'+b.join(" ")+'">'+l+":"+(S<10?"0"+S:S)+"</span>")));this.picker.find(".datetimepicker-minutes td").html(D.join(""));var _=this.date.getUTCFullYear(),A=this.setTitle(".datetimepicker-months",i).end().find(".month").removeClass("active");_===i&&A.eq(this.date.getUTCMonth()).addClass("active"),(i<d||i>u)&&A.addClass("disabled"),i===d&&A.slice(0,c).addClass("disabled"),i===u&&A.slice(p).addClass("disabled"),D="",i=10*parseInt(i/10,10);var N=this.setTitle(".datetimepicker-years",i+"-"+(i+9)).end().find("td");i-=1,t=new Date(this.viewDate);for(var S=-1;S<11;S++)t.setUTCFullYear(i),b=this.onRenderYear(t),-1!==S&&10!==S||b.push(n),D+='<span class="'+b.join(" ")+'">'+i+"</span>",i+=1;N.html(D),this.place()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),s=e.getUTCDate(),a=e.getUTCHours();switch(this.viewMode){case 0:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()&&a<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()&&a>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&s<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&s>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(t){if(t.preventDefault(),t.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var i=t.originalEvent,s=i.wheelDelta,a=s>0?1:0===s?0:-1;this.wheelViewModeNavigationInverseDirection&&(a=-a),this.showMode(a),setTimeout(e.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(t){t.stopPropagation(),t.preventDefault();var i=e(t.target).closest("span, td, th, legend");if(i.is("."+this.icontype)&&(i=e(i).parent().closest("span, td, th, legend")),1===i.length){if(i.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(i[0].nodeName.toLowerCase()){case"th":switch(i[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var a=r.modes[this.viewMode].navStep*("prev"===i[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,a);break;case 1:this.viewDate=this.moveDate(this.viewDate,a);break;case 2:this.viewDate=this.moveMonth(this.viewDate,a);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,a)}this.fill(),this.element.trigger({type:i[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset(),this.autoclose&&this.hide();break;case"today":var n=new Date;n=s(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),0),n<this.startDate?n=this.startDate:n>this.endDate&&(n=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(n),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!i.is(".disabled")){var o=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth(),l=this.viewDate.getUTCDate(),d=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();if(i.is(".month")?(this.viewDate.setUTCDate(1),h=i.parent().find("span").index(i),l=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(h),this.element.trigger({type:"changeMonth",date:this.viewDate}),this.viewSelect>=3&&this._setDate(s(o,h,l,d,c,u,0))):i.is(".year")?(this.viewDate.setUTCDate(1),o=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(o),this.element.trigger({type:"changeYear",date:this.viewDate}),this.viewSelect>=4&&this._setDate(s(o,h,l,d,c,u,0))):i.is(".hour")?(d=parseInt(i.text(),10)||0,(i.hasClass("hour_am")||i.hasClass("hour_pm"))&&(12===d&&i.hasClass("hour_am")?d=0:12!==d&&i.hasClass("hour_pm")&&(d+=12)),this.viewDate.setUTCHours(d),this.element.trigger({type:"changeHour",date:this.viewDate}),this.viewSelect>=1&&this._setDate(s(o,h,l,d,c,u,0))):i.is(".minute")&&(c=parseInt(i.text().substr(i.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(c),this.element.trigger({type:"changeMinute",date:this.viewDate}),this.viewSelect>=0&&this._setDate(s(o,h,l,d,c,u,0))),0!==this.viewMode){var p=this.viewMode;this.showMode(-1),this.fill(),p===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(i.is(".day")&&!i.is(".disabled")){var l=parseInt(i.text(),10)||1,o=this.viewDate.getUTCFullYear(),h=this.viewDate.getUTCMonth(),d=this.viewDate.getUTCHours(),c=this.viewDate.getUTCMinutes(),u=this.viewDate.getUTCSeconds();i.is(".old")?0===h?(h=11,o-=1):h-=1:i.is(".new")&&(11===h?(h=0,o+=1):h+=1),this.viewDate.setUTCFullYear(o),this.viewDate.setUTCMonth(h,l),this.element.trigger({type:"changeDay",date:this.viewDate}),this.viewSelect>=2&&this._setDate(s(o,h,l,d,c,u,0))}var p=this.viewMode;this.showMode(-1),this.fill(),p===this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){t&&"date"!==t||(this.date=e),t&&"view"!==t||(this.viewDate=e),this.fill(),this.setValue();var i;this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),this.element.trigger({type:"changeDate",date:this.getDate()}),null===e&&(this.date=this.viewDate)},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,s,a=new Date(e.valueOf()),n=a.getUTCDate(),o=a.getUTCMonth(),r=Math.abs(t);if(t=t>0?1:-1,1===r)s=-1===t?function(){return a.getUTCMonth()===o}:function(){return a.getUTCMonth()!==i},i=o+t,a.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var h=0;h<r;h++)a=this.moveMonth(a,t);i=a.getUTCMonth(),a.setUTCDate(n),s=function(){return i!==a.getUTCMonth()}}for(;s();)a.setUTCDate(--n),a.setUTCMonth(i);return a},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,i,s,a=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37===e.keyCode?-1:1;var n=this.viewMode;e.ctrlKey?n+=2:e.shiftKey&&(n+=1),4===n?(i=this.moveYear(this.date,t),s=this.moveYear(this.viewDate,t)):3===n?(i=this.moveMonth(this.date,t),s=this.moveMonth(this.viewDate,t)):2===n?(i=this.moveDate(this.date,t),s=this.moveDate(this.viewDate,t)):1===n?(i=this.moveHour(this.date,t),s=this.moveHour(this.viewDate,t)):0===n&&(i=this.moveMinute(this.date,t),s=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),e.preventDefault(),a=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38===e.keyCode?-1:1,n=this.viewMode,e.ctrlKey?n+=2:e.shiftKey&&(n+=1),4===n?(i=this.moveYear(this.date,t),s=this.moveYear(this.viewDate,t)):3===n?(i=this.moveMonth(this.date,t),s=this.moveMonth(this.viewDate,t)):2===n?(i=this.moveDate(this.date,7*t),s=this.moveDate(this.viewDate,7*t)):1===n?this.showMeridian?(i=this.moveHour(this.date,6*t),s=this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),s=this.moveHour(this.viewDate,4*t)):0===n&&(i=this.moveMinute(this.date,4*t),s=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=s,this.setValue(),this.update(),e.preventDefault(),a=!0);break;case 13:if(0!==this.viewMode){var o=this.viewMode;this.showMode(-1),this.fill(),o===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(a){var r;this.isInput?r=this.element:this.component&&(r=this.element.find("input")),r&&r.change(),this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min(r.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+r.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var n=e.fn.datetimepicker;e.fn.datetimepicker=function(i){var s=Array.apply(null,arguments);s.shift();var n;return this.each(function(){var o=e(this),r=o.data("datetimepicker"),h="object"==typeof i&&i;if(r||o.data("datetimepicker",r=new a(this,e.extend({},e.fn.datetimepicker.defaults,h))),"string"==typeof i&&"function"==typeof r[i]&&(n=r[i].apply(r,s))!==t)return!1}),n!==t?n:this},e.fn.datetimepicker.defaults={},e.fn.datetimepicker.Constructor=a;var o=e.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"}},r={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,r.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"===e)return"input"===t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"===e)return"input"===t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"===e)return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"===e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),s=e.match(this.validParts(t));if(!i||!i.length||!s||0===s.length)throw new Error("Invalid date format.");return{separators:i,parts:s}},parseDate:function(t,i,n,r,h){if(t instanceof Date){var l=new Date(t.valueOf()-6e4*t.getTimezoneOffset());return l.setMilliseconds(0),l}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd hh:ii",r)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(t)&&(i=this.parseFormat("yyyy-mm-dd hh:ii:ss",r)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(t)){var d,c,u=/([-+]\d+)([dmwy])/,p=t.match(/([-+]\d+)([dmwy])/g);t=new Date;for(var f=0;f<p.length;f++)switch(d=u.exec(p[f]),c=parseInt(d[1]),d[2]){case"d":t.setUTCDate(t.getUTCDate()+c);break;case"m":t=a.prototype.moveMonth.call(a.prototype,t,c);break;case"w":t.setUTCDate(t.getUTCDate()+7*c);break;case"y":t=a.prototype.moveYear.call(a.prototype,t,c)}return s(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),0)}var g,m,d,p=t&&t.toString().match(this.nonpunctuation)||[],t=new Date(0,0,0,0,0,0,0),v={},y=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],w={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12===t?0:t)},H:function(e,t){return e.setUTCHours(12===t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;){if(isNaN(e.getUTCMonth()))return e;e.setUTCDate(e.getUTCDate()-1)}return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1===t?e.getUTCHours()+12:e.getUTCHours())},z:function(){return h}};if(w.M=w.MM=w.mm=w.m,w.dd=w.d,w.P=w.p,w.Z=w.z,t=s(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()),p.length===i.parts.length){for(var f=0,b=i.parts.length;f<b;f++){if(g=parseInt(p[f],10),d=i.parts[f],isNaN(g))switch(d){case"MM":m=e(o[n].months).filter(function(){var e=this.slice(0,p[f].length);return e===p[f].slice(0,e.length)}),g=e.inArray(m[0],o[n].months)+1;break;case"M":m=e(o[n].monthsShort).filter(function(){var e=this.slice(0,p[f].length),t=p[f].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}),g=e.inArray(m[0],o[n].monthsShort)+1;break;case"p":case"P":g=e.inArray(p[f].toLowerCase(),o[n].meridiem)}v[d]=g}for(var D,f=0;f<y.length;f++)(D=y[f])in v&&!isNaN(v[D])&&w[D](t,v[D])}return t},formatDate:function(t,i,s,a,n){if(null===t)return"";var h;if("standard"===a)h={t:t.getTime(),yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear(),m:t.getUTCMonth()+1,M:o[s].monthsShort[t.getUTCMonth()],MM:o[s].months[t.getUTCMonth()],d:t.getUTCDate(),D:o[s].daysShort[t.getUTCDay()],DD:o[s].days[t.getUTCDay()],p:2===o[s].meridiem.length?o[s].meridiem[t.getUTCHours()<12?0:1]:"",h:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds(),z:n},2===o[s].meridiem.length?h.H=h.h%12==0?12:h.h%12:h.H=h.h,h.HH=(h.H<10?"0":"")+h.H,h.P=h.p.toUpperCase(),h.Z=h.z,h.hh=(h.h<10?"0":"")+h.h,h.ii=(h.i<10?"0":"")+h.i,h.ss=(h.s<10?"0":"")+h.s,h.dd=(h.d<10?"0":"")+h.d,h.mm=(h.m<10?"0":"")+h.m;else{if("php"!==a)throw new Error("Invalid format type.");h={y:t.getUTCFullYear().toString().substring(2),Y:t.getUTCFullYear(),F:o[s].months[t.getUTCMonth()],M:o[s].monthsShort[t.getUTCMonth()],n:t.getUTCMonth()+1,t:r.getDaysInMonth(t.getUTCFullYear(),t.getUTCMonth()),j:t.getUTCDate(),l:o[s].days[t.getUTCDay()],D:o[s].daysShort[t.getUTCDay()],w:t.getUTCDay(),N:0===t.getUTCDay()?7:t.getUTCDay(),S:t.getUTCDate()%10<=o[s].suffix.length?o[s].suffix[t.getUTCDate()%10-1]:"",a:2===o[s].meridiem.length?o[s].meridiem[t.getUTCHours()<12?0:1]:"",g:t.getUTCHours()%12==0?12:t.getUTCHours()%12,G:t.getUTCHours(),i:t.getUTCMinutes(),s:t.getUTCSeconds()},h.m=(h.n<10?"0":"")+h.n,h.d=(h.j<10?"0":"")+h.j,h.A=h.a.toString().toUpperCase(),h.h=(h.g<10?"0":"")+h.g,h.H=(h.G<10?"0":"")+h.G,h.i=(h.i<10?"0":"")+h.i,h.s=(h.s<10?"0":"")+h.s}for(var t=[],l=e.extend([],i.separators),d=0,c=i.parts.length;d<c;d++)l.length&&t.push(l.shift()),t.push(h[i.parts[d]]);return l.length&&t.push(l.shift()),t.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};r.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplate+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplate+r.contTemplate+r.footTemplate+"</table></div></div>",r.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+r.headTemplateV3+"<tbody></tbody>"+r.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+r.headTemplateV3+r.contTemplate+r.footTemplate+"</table></div></div>",e.fn.datetimepicker.DPGlobal=r,e.fn.datetimepicker.noConflict=function(){return e.fn.datetimepicker=n,this},e(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(t){var i=e(this);i.data("datetimepicker")||(t.preventDefault(),i.datetimepicker("show"))}),e(function(){e('[data-provide="datetimepicker-inline"]').datetimepicker()})});